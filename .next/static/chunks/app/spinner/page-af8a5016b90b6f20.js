(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{255:(e,t,a)=>{"use strict";function s(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return s}}),a(5155),a(7650),a(5744),a(589)},1584:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155);let l=(0,a(5028).default)(()=>Promise.all([a.e(766),a.e(874),a.e(615)]).then(a.bind(a,4615)),{loadableGenerated:{webpack:()=>[4615]},ssr:!1});function r(){return(0,s.jsx)(l,{})}},2146:(e,t,a)=>{"use strict";function s(e){let{reason:t,children:a}=e;return a}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}}),a(5262)},2390:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(5155),l=a(2115),r=a(5695),n=a(5928),o=a(6493),i=a(1584),c=a(6874),d=a.n(c);let u=[{id:1,tokens:10,probability:.3,label:"10 Tokens",color:"from-blue-500 to-blue-700"},{id:2,tokens:25,probability:.25,label:"25 Tokens",color:"from-green-500 to-green-700"},{id:3,tokens:50,probability:.2,label:"50 Tokens",color:"from-yellow-500 to-yellow-700"},{id:4,tokens:100,probability:.15,label:"100 Tokens",color:"from-orange-500 to-orange-700"},{id:5,tokens:200,probability:.07,label:"200 Tokens",color:"from-red-500 to-red-700"},{id:6,tokens:500,probability:.03,label:"500 Tokens",color:"from-purple-500 to-purple-700"}],m=[{id:1,tokens:20,probability:.35,label:"20 Tokens",color:"from-blue-500 to-blue-700"},{id:2,tokens:35,probability:.3,label:"35 Tokens",color:"from-green-500 to-green-700"},{id:3,tokens:75,probability:.2,label:"75 Tokens",color:"from-yellow-500 to-yellow-700"},{id:4,tokens:150,probability:.1,label:"150 Tokens",color:"from-orange-500 to-orange-700"},{id:5,tokens:250,probability:.05,label:"250 Tokens",color:"from-red-500 to-red-700"}],p=[{id:1,tokens:100,probability:.3,label:"100 Tokens",color:"from-blue-500 to-blue-700"},{id:2,tokens:250,probability:.25,label:"250 Tokens",color:"from-green-500 to-green-700"},{id:3,tokens:500,probability:.2,label:"500 Tokens",color:"from-yellow-500 to-yellow-700"},{id:4,tokens:1e3,probability:.15,label:"1000 Tokens",color:"from-orange-500 to-orange-700"},{id:5,reward:"avatar",probability:.05,label:"Rare Avatar",color:"from-pink-500 to-pink-700"},{id:6,reward:"banner",probability:.03,label:"Team Banner",color:"from-purple-500 to-purple-700"},{id:7,reward:"decoration",probability:.02,label:"Profile Decoration",color:"from-indigo-500 to-indigo-700"}],x={SPINNER:"spinner",BROKE:"broke",LEGEND:"legend"};function f(){let e=(0,r.useRouter)(),{user:t}=(0,n.A)(),{profile:a,updateProfileData:c,loading:f}=(0,o.x)(),[b,h]=(0,l.useState)(!1),[g,y]=(0,l.useState)(null),[j,w]=(0,l.useState)(0),[N,v]=(0,l.useState)(null),[k,T]=(0,l.useState)(0),[D,E]=(0,l.useState)(null),[R,C]=(0,l.useState)([]),[S,P]=(0,l.useState)(x.SPINNER),[L,O]=(0,l.useState)(0),[_,U]=(0,l.useState)(0),[B,M]=(0,l.useState)(null),[I,A]=(0,l.useState)(null),[H,z]=(0,l.useState)(!1),[G,K]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(!t){e.push("/login");return}if(a){let e=Date.now(),t=new Date(e).setHours(0,0,0,0),s=a.spinnerUsed||0,l=new Date(a.lastSpinTime||0).setHours(0,0,0,0),r=a.brokeCrateUsed||0,n=new Date(a.lastBrokeCrateTime||0).setHours(0,0,0,0),o=a.legendCrateUsed||0,i=new Date(a.lastLegendCrateTime||0).setHours(0,0,0,0);if(C(a.spinHistory||[]),t>l)T(5),E(null),s>0&&c({spinnerUsed:0,lastSpinTime:e}).catch(e=>console.error("Error resetting spinner usage:",e));else if(T(5-s),s>=5){let e=new Date(t);e.setDate(e.getDate()+1),E(e.getTime())}if(t>n)O(5),M(null),r>0&&c({brokeCrateUsed:0,lastBrokeCrateTime:e}).catch(e=>console.error("Error resetting broke crate usage:",e));else if(O(5-r),r>=5){let e=new Date(t);e.setDate(e.getDate()+1),M(e.getTime())}if(t>i)U(2),A(null),o>0&&c({legendCrateUsed:0,lastLegendCrateTime:e}).catch(e=>console.error("Error resetting legend crate usage:",e));else if(U(2-o),o>=2){let e=new Date(t);e.setDate(e.getDate()+1),A(e.getTime())}}},[t,a,e,c]);let Y=e=>{let t=Math.max(0,e-Date.now()),a=Math.floor(t/36e5),s=Math.floor(t%36e5/6e4);return"".concat(a,"h ").concat(s,"m")},F=async()=>{if(b||!a||k<=0)return;h(!0),v(null),y(null);let e=Math.random(),t=0,s=u[0];for(let a of u)if(e<=(t+=a.probability)){s=a;break}let l=720+360*Math.random(),r=360/u.length;w(l+u.findIndex(e=>e.id===s.id)*r),setTimeout(async()=>{y(s);try{let e=(a.spinnerUsed||0)+1,t=(a.cosmicTokens||0)+s.tokens,l=Date.now(),r=[...a.spinHistory||[],{time:l,prize:s,type:x.SPINNER}];r.length>10&&r.shift(),v("Congratulations! You won ".concat(s.tokens," Cosmic Tokens! Your new balance: ").concat(t," Tokens.")),T(5-e),C(r);try{if(await c({cosmicTokens:t,spinnerUsed:e,lastSpinTime:l,spinHistory:r}),e>=5){let e=new Date().setHours(0,0,0,0),t=new Date(e);t.setDate(t.getDate()+1),E(t.getTime())}}catch(e){v("You won ".concat(s.tokens," tokens! Balance: ").concat(t," Tokens. (Changes will sync on next refresh)"))}}catch(e){v("Error processing your spin. Please refresh the page. Your current balance: ".concat(a.cosmicTokens||0," Tokens."))}finally{h(!1)}},3e3)},J=async e=>{if(H||!a||e===x.BROKE&&L<=0||e===x.LEGEND&&_<=0)return;z(!0),v(null),K(null);let t=e===x.BROKE?m:p,s=Math.random(),l=0,r=t[0];for(let e of t)if(s<=(l+=e.probability)){r=e;break}setTimeout(async()=>{K(r);try{let t=Date.now(),s=a.cosmicTokens||0,l=s,n="",o={lastSpinTime:t};if("tokens"in r&&void 0!==r.tokens)o.cosmicTokens=l=s+r.tokens,n="".concat(r.tokens," Cosmic Tokens");else if("reward"in r){let e=r.reward;if("avatar"===e){let e="rare_avatar_".concat(Math.floor(10*Math.random())+1),t=[...a.avatars||[]];t.includes(e)||(t.push(e),o.avatars=t),n="a Rare Avatar"}else if("banner"===e){let e="team_banner_".concat(Math.floor(5*Math.random())+1),t=[...a.teamBanners||[]];t.includes(e)||(t.push(e),o.teamBanners=t),n="a Team Banner"}else if("decoration"===e){let e="profile_decoration_".concat(Math.floor(7*Math.random())+1),t=[...a.profileDecorations||[]];t.includes(e)||(t.push(e),o.profileDecorations=t),n="a Profile Decoration"}}if(e===x.BROKE){let e=(a.brokeCrateUsed||0)+1;if(o.brokeCrateUsed=e,o.lastBrokeCrateTime=t,O(5-e),e>=5){let e=new Date().setHours(0,0,0,0),t=new Date(e);t.setDate(t.getDate()+1),M(t.getTime())}}else if(e===x.LEGEND){let e=(a.legendCrateUsed||0)+1;if(o.legendCrateUsed=e,o.lastLegendCrateTime=t,U(2-e),e>=2){let e=new Date().setHours(0,0,0,0),t=new Date(e);t.setDate(t.getDate()+1),A(t.getTime())}}let i=[...a.spinHistory||[],{time:t,prize:r,type:e}];i.length>10&&i.shift(),o.spinHistory=i,C(i),"tokens"in r?v("Congratulations! You found ".concat(n," in the crate! Your new balance: ").concat(l," Tokens.")):v("Congratulations! You found ".concat(n," in the crate!"));try{await c(o)}catch(e){v("You found ".concat(n,"! (Changes will sync on next refresh)"))}}catch(e){v("Error opening the crate. Please refresh the page and try again.")}finally{z(!1)}},2e3)};return f?(0,s.jsxs)("main",{className:"min-h-screen flex flex-col",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-space-cyan border-t-transparent rounded-full"})})]}):(0,s.jsxs)("main",{className:"min-h-screen flex flex-col",children:[(0,s.jsx)(i.A,{}),(0,s.jsxs)("div",{className:"flex-1 px-6 py-12 relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute w-96 h-96 rounded-full bg-space-purple/20 blur-3xl -top-48 -left-48 animate-pulse-slow"}),(0,s.jsx)("div",{className:"absolute w-80 h-80 rounded-full bg-space-indigo/20 blur-3xl bottom-0 right-0 animate-pulse-slow delay-1000"}),(0,s.jsx)("div",{className:"absolute w-64 h-64 rounded-full bg-space-cyan/10 blur-3xl top-1/3 left-1/3 animate-pulse-slow delay-2000"})]}),(0,s.jsxs)("div",{className:"container mx-auto max-w-4xl",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold font-space mb-2 animate-fade-in-up",children:(0,s.jsx)("span",{className:"gradient-text cosmic-gradient",children:"Cosmic Rewards"})}),(0,s.jsx)("p",{className:"text-cosmic-text-secondary mb-8 animate-fade-in-up",style:{animationDelay:"100ms"},children:"Spin the wheel or open crates to earn tokens and rare collectibles!"}),(0,s.jsxs)("div",{className:"flex mb-8 justify-center space-x-2 md:space-x-4 animate-fade-in-up",style:{animationDelay:"150ms"},children:[(0,s.jsxs)("button",{onClick:()=>P(x.SPINNER),className:"px-4 py-3 font-bold transition-all duration-300 relative ".concat(S===x.SPINNER?"text-space-cyan bg-space-dark/80 border-b-2 border-space-cyan cosmic-shadow-sm":"text-cosmic-text-secondary hover:text-white"),children:["Daily Spinner",(0,s.jsx)("span",{className:"ml-2 py-0.5 px-1.5 text-xs bg-space-purple/30 rounded-full",children:k})]}),(0,s.jsxs)("button",{onClick:()=>P(x.BROKE),className:"px-4 py-3 font-bold transition-all duration-300 relative ".concat(S===x.BROKE?"text-space-cyan bg-space-dark/80 border-b-2 border-space-cyan cosmic-shadow-sm":"text-cosmic-text-secondary hover:text-white"),children:["Broke Crate",(0,s.jsx)("span",{className:"ml-2 py-0.5 px-1.5 text-xs bg-space-purple/30 rounded-full",children:L})]}),(0,s.jsxs)("button",{onClick:()=>P(x.LEGEND),className:"px-4 py-3 font-bold transition-all duration-300 relative ".concat(S===x.LEGEND?"text-space-cyan bg-space-dark/80 border-b-2 border-space-cyan cosmic-shadow-sm":"text-cosmic-text-secondary hover:text-white"),children:["Legend Crate",(0,s.jsx)("span",{className:"ml-2 py-0.5 px-1.5 text-xs bg-space-purple/30 rounded-full",children:_})]})]}),S===x.SPINNER&&(0,s.jsx)("div",{className:"cosmic-card border border-space-purple/30 p-8 mb-8 animate-fade-in-up",style:{animationDelay:"150ms"},children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[(0,s.jsxs)("div",{className:"relative w-72 h-72 mx-auto",children:[(0,s.jsxs)("div",{className:"absolute inset-0 rounded-full border-4 border-space-indigo cosmic-shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"w-full h-full relative transition-transform duration-3000 ease-out",style:{transform:"rotate(".concat(j,"deg)")},children:u.map((e,t)=>{let a=360/u.length,l=t*a;return(0,s.jsx)("div",{className:"absolute w-1/2 h-1/2 top-0 left-1/2 origin-bottom-left bg-gradient-to-r ".concat(e.color),style:{transform:"rotate(".concat(l,"deg) skew(").concat(90-a,"deg)")},children:(0,s.jsx)("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 transform -rotate-90 text-white font-bold text-sm whitespace-nowrap",style:{transform:"rotate(".concat(-l-a/2,"deg) translateX(-50%) translateY(-20px)")},children:e.label})},e.id)})}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-space-dark border-2 border-space-gold z-10 shadow-glow"})})]}),(0,s.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -mt-2 w-0 h-0 border-l-[12px] border-r-[12px] border-b-[24px] border-l-transparent border-r-transparent border-b-space-gold z-20 animate-pulse-slow"})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-6 text-center md:text-left",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-space-cyan",children:"Daily Spins"}),(0,s.jsxs)("p",{className:"mb-4",children:[(0,s.jsx)("span",{className:"text-3xl font-bold",children:k}),(0,s.jsxs)("span",{className:"text-cosmic-text-secondary",children:[" / ",5," remaining"]})]}),D&&(0,s.jsxs)("div",{className:"text-cosmic-text-secondary",children:["Resets in: ",(0,s.jsx)("span",{className:"text-space-gold",children:Y(D)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-space-cyan",children:"Your Balance"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-space-gold",children:[(null==a?void 0:a.cosmicTokens)||0," ",(0,s.jsx)("span",{className:"text-lg",children:"Tokens"})]})]}),(0,s.jsx)("button",{onClick:F,disabled:b||k<=0,className:"btn-gradient py-3 px-8 text-lg w-full md:w-auto ".concat(b||k<=0?"opacity-50 cursor-not-allowed":"cosmic-shadow-sm hover:cosmic-shadow-md"),children:b?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsx)("span",{className:"animate-spin mr-2 h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),"Spinning..."]}):k<=0?"No Spins Left Today":"Spin the Wheel!"}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(d(),{href:"/marketplace",className:"text-space-cyan hover:text-space-pink transition-colors duration-200",children:"Visit the Marketplace →"})})]})]})}),S===x.BROKE&&(0,s.jsx)("div",{className:"cosmic-card border border-space-purple/30 p-8 mb-8 animate-fade-in-up",style:{animationDelay:"150ms"},children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[(0,s.jsx)("div",{className:"relative w-64 h-64 mx-auto",children:(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-500 ".concat(H?"scale-110 opacity-80":""),children:(0,s.jsxs)("div",{className:"relative w-48 h-48 border-4 border-space-cyan/80 bg-gradient-to-b from-space-dark to-space-darker rounded-lg cosmic-shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-1/3 bg-gradient-to-b from-space-cyan/30 to-space-indigo/20 border-b-2 border-space-cyan/50 transition-all duration-1000 origin-bottom ".concat(H?"-translate-y-full rotate-45":"")}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-full h-full bg-space-indigo/10 transition-all duration-1000 ".concat(H?"animate-pulse-fast":"")})}),(0,s.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-space-cyan mb-1",children:"BROKE CRATE"}),(0,s.jsx)("div",{className:"text-xs text-cosmic-text-secondary",children:"Normal Rewards"})]})]})})}),(0,s.jsxs)("div",{className:"flex-1 space-y-6 text-center md:text-left",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-space-cyan",children:"Broke Crate"}),(0,s.jsx)("p",{className:"text-cosmic-text-secondary mb-4",children:"Standard crate with token rewards for players on a budget."}),(0,s.jsxs)("p",{className:"mb-4",children:[(0,s.jsx)("span",{className:"text-3xl font-bold",children:L}),(0,s.jsxs)("span",{className:"text-cosmic-text-secondary",children:[" / ",5," remaining"]})]}),B&&(0,s.jsxs)("div",{className:"text-cosmic-text-secondary",children:["Resets in: ",(0,s.jsx)("span",{className:"text-space-gold",children:Y(B)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-space-cyan",children:"Your Balance"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-space-gold",children:[(null==a?void 0:a.cosmicTokens)||0," ",(0,s.jsx)("span",{className:"text-lg",children:"Tokens"})]})]}),(0,s.jsx)("button",{onClick:()=>J(x.BROKE),disabled:H||L<=0,className:"btn-gradient py-3 px-8 text-lg w-full md:w-auto ".concat(H||L<=0?"opacity-50 cursor-not-allowed":"cosmic-shadow-sm hover:cosmic-shadow-md"),children:H&&S===x.BROKE?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsx)("span",{className:"animate-spin mr-2 h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),"Opening..."]}):L<=0?"No Crates Left Today":"Open Broke Crate"})]})]})}),S===x.LEGEND&&(0,s.jsx)("div",{className:"cosmic-card border border-space-purple/30 p-8 mb-8 animate-fade-in-up",style:{animationDelay:"150ms"},children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[(0,s.jsx)("div",{className:"relative w-64 h-64 mx-auto",children:(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-500 ".concat(H?"scale-110 opacity-80":""),children:(0,s.jsxs)("div",{className:"relative w-48 h-48 border-4 border-space-gold/80 bg-gradient-to-b from-space-dark to-space-darker rounded-lg cosmic-shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-1/3 bg-gradient-to-b from-space-gold/30 to-space-pink/20 border-b-2 border-space-gold/50 transition-all duration-1000 origin-bottom ".concat(H?"-translate-y-full rotate-45":"")}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-full h-full bg-space-gold/10 transition-all duration-1000 ".concat(H?"animate-pulse-fast":"")})}),(0,s.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-space-gold mb-1",children:"LEGEND CRATE"}),(0,s.jsx)("div",{className:"text-xs text-cosmic-text-secondary",children:"Premium Rewards"})]})]})})}),(0,s.jsxs)("div",{className:"flex-1 space-y-6 text-center md:text-left",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-space-gold",children:"Legend Crate"}),(0,s.jsx)("p",{className:"text-cosmic-text-secondary mb-4",children:"Premium crate with rare rewards like avatars, team banners, and decorations."}),(0,s.jsxs)("p",{className:"mb-4",children:[(0,s.jsx)("span",{className:"text-3xl font-bold",children:_}),(0,s.jsxs)("span",{className:"text-cosmic-text-secondary",children:[" / ",2," remaining"]})]}),I&&(0,s.jsxs)("div",{className:"text-cosmic-text-secondary",children:["Resets in: ",(0,s.jsx)("span",{className:"text-space-gold",children:Y(I)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-space-gold",children:"Your Balance"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-space-gold",children:[(null==a?void 0:a.cosmicTokens)||0," ",(0,s.jsx)("span",{className:"text-lg",children:"Tokens"})]})]}),(0,s.jsx)("button",{onClick:()=>J(x.LEGEND),disabled:H||_<=0,className:"btn-gradient py-3 px-8 text-lg w-full md:w-auto ".concat(H||_<=0?"opacity-50 cursor-not-allowed":"cosmic-shadow-sm hover:cosmic-shadow-md"),children:H&&S===x.LEGEND?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsx)("span",{className:"animate-spin mr-2 h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),"Opening..."]}):_<=0?"No Crates Left Today":"Open Legend Crate"})]})]})}),(g||G)&&(0,s.jsxs)("div",{className:"cosmic-card border border-space-gold/50 p-6 text-center animate-bounce-in mb-8",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-space-gold mb-2",children:N}),(0,s.jsxs)("p",{children:["Your new balance: ",(0,s.jsxs)("span",{className:"font-bold",children:[(null==a?void 0:a.cosmicTokens)||0," Tokens"]})]})]}),R.length>0&&(0,s.jsxs)("div",{className:"cosmic-card border border-space-purple/30 p-6 mb-8 animate-fade-in-up",style:{animationDelay:"200ms"},children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Recent Rewards History"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:R.map((e,t)=>(0,s.jsx)("div",{className:"p-3 border border-space-indigo/30 rounded-lg",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:["tokens"in e.prize?(0,s.jsxs)("div",{className:"text-lg font-bold text-space-gold",children:["+",e.prize.tokens," Tokens"]}):"reward"in e.prize?(0,s.jsx)("div",{className:"text-lg font-bold text-space-gold",children:e.prize.label}):(0,s.jsx)("div",{className:"text-lg font-bold text-space-gold",children:"Unknown Reward"}),(0,s.jsx)("div",{className:"text-xs text-cosmic-text-secondary",children:new Date(e.time).toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"px-3 py-1 rounded-full text-xs text-white bg-gradient-to-r ".concat(e.prize.color),children:e.prize.label}),e.type&&(0,s.jsx)("div",{className:"px-2 py-0.5 rounded-full text-xs bg-space-dark",children:e.type===x.SPINNER?"Spinner":e.type===x.BROKE?"Broke":"Legend"})]})]})},t))})]}),S===x.SPINNER&&(0,s.jsxs)("div",{className:"cosmic-card border border-space-cyan/30 p-6 animate-fade-in-up",style:{animationDelay:"250ms"},children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Spinner Prizes"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:u.map(e=>(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-gradient-to-r ".concat(e.color," text-white text-center"),children:[(0,s.jsx)("div",{className:"text-xl font-bold",children:e.tokens}),(0,s.jsx)("div",{className:"text-sm",children:"Cosmic Tokens"}),(0,s.jsxs)("div",{className:"text-xs mt-1",children:[Math.round(100*e.probability),"% chance"]})]},e.id))})]}),S===x.BROKE&&(0,s.jsxs)("div",{className:"cosmic-card border border-space-cyan/30 p-6 animate-fade-in-up",style:{animationDelay:"250ms"},children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Broke Crate Prizes"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:m.map(e=>(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-gradient-to-r ".concat(e.color," text-white text-center"),children:[(0,s.jsx)("div",{className:"text-xl font-bold",children:e.tokens}),(0,s.jsx)("div",{className:"text-sm",children:"Cosmic Tokens"}),(0,s.jsxs)("div",{className:"text-xs mt-1",children:[Math.round(100*e.probability),"% chance"]})]},e.id))})]}),S===x.LEGEND&&(0,s.jsxs)("div",{className:"cosmic-card border border-space-cyan/30 p-6 animate-fade-in-up",style:{animationDelay:"250ms"},children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Legend Crate Prizes"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.map(e=>(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-gradient-to-r ".concat(e.color," text-white text-center"),children:["tokens"in e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-xl font-bold",children:e.tokens}),(0,s.jsx)("div",{className:"text-sm",children:"Cosmic Tokens"})]}):"reward"in e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-xl font-bold",children:e.label}),(0,s.jsx)("div",{className:"text-sm",children:"Special Item"})]}):null,(0,s.jsxs)("div",{className:"text-xs mt-1",children:[Math.round(100*e.probability),"% chance"]})]},e.id))})]})]})]})]})}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return r},createSnapshot:function(){return o}});let a=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class s{disable(){throw a}getStore(){}run(){throw a}exit(){throw a}enterWith(){throw a}static bind(e){return e}}let l="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function r(){return l?new l:new s}function n(e){return l?l.bind(e):s.bind(e)}function o(){return l?l.snapshot():function(e,...t){return e(...t)}}},5028:(e,t,a)=>{"use strict";a.d(t,{default:()=>l.a});var s=a(6645),l=a.n(s)},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},5744:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return s.workAsyncStorageInstance}});let s=a(7828)},5928:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,O:()=>d});var s=a(5155),l=a(2115),r=a(3004),n=a(6104),o=a(5317);let i=(0,l.createContext)(null);function c(){let e=(0,l.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){let{children:t}=e,[a,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=(0,r.hg)(n.j2,e=>{c(e),u(!1)});return(0,r.Q4)(n.j2).then(e=>{(null==e?void 0:e.user)&&c(e.user)}).catch(e=>{}),e},[]);let m=async(e,t,a)=>{let s=await (0,r.eJ)(n.j2,e,t),l=s.user;return a&&l&&(await (0,r.r7)(l,{displayName:a}),await (0,o.BN)((0,o.H9)(n.db,"userProfiles",l.uid),{email:l.email,username:a,displayName:a,createdAt:(0,o.O5)(),hasSetUsername:!0})),s},p=async()=>{try{n.hJ.setCustomParameters({prompt:"select_account"});let t=await (0,r.df)(n.j2,n.hJ,r.hk),a=t.user;if(a){var e;await (0,o.BN)((0,o.H9)(n.db,"userProfiles",a.uid),{email:a.email,displayName:a.displayName||(null===(e=a.email)||void 0===e?void 0:e.split("@")[0])||"User",photoURL:a.photoURL,createdAt:(0,o.O5)(),lastLogin:(0,o.O5)(),hasSetUsername:!1},{merge:!0})}return t}catch(e){if("auth/popup-blocked"===e.code||"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code){await (0,r.$2)(n.j2,n.hJ);return}throw e}};return(0,s.jsx)(i.Provider,{value:{user:a,loading:d,signUp:m,signIn:(e,t)=>(0,r.x9)(n.j2,e,t),signInWithGoogle:p,logout:()=>(0,r.CI)(n.j2)},children:t})}},6104:(e,t,a)=>{"use strict";let s;a.d(t,{IG:()=>d,db:()=>c,hJ:()=>u,j2:()=>i});var l=a(3915),r=a(3004),n=a(5317),o=a(858);let i=null,c=null,d=null,u=null;(s=(0,l.Dk)().length?(0,l.Dk)()[0]:(0,l.Wp)({apiKey:"AIzaSyCQf_QXzyZkyRxsbo91PJmdwjEn3lVfDTo",authDomain:"cosmicteams-bbf29.firebaseapp.com",projectId:"cosmicteams-bbf29",storageBucket:"cosmicteams-bbf29.appspot.com",messagingSenderId:"807144888137",appId:"1:807144888137:web:2621a3ac917d9675d6ec98"}))&&(i=(0,r.xI)(s),c=(0,n.aU)(s),d=(0,o.c7)(s),u=new r.HF)},6493:(e,t,a)=>{"use strict";a.d(t,{H:()=>m,x:()=>u});var s=a(5155),l=a(2115),r=a(5317),n=a(3004),o=a(858),i=a(6104),c=a(5928);let d=(0,l.createContext)(null);function u(){let e=(0,l.useContext)(d);if(!e)throw Error("useProfile must be used within a ProfileProvider");return e}function m(e){let{children:t}=e,{user:a}=(0,c.A)(),[u,m]=(0,l.useState)(null),[p,x]=(0,l.useState)(!0),[f,b]=(0,l.useState)(!1),[h,g]=(0,l.useState)(null);(0,l.useEffect)(()=>{!async function(){if(!a){m(null),x(!1);return}x(!0);try{let e={displayName:a.displayName||"",photoURL:a.photoURL||"",email:a.email||"",username:a.email?a.email.split("@")[0]:"",profileMusic:null,musicType:null,gameTiers:{"neth-op":"LT1",axe:"LT1",smp:"LT1",cpvp:"LT1",sword:"LT1",uhc:"LT1"},canCreateTeams:!0,lastUpdated:Date.now(),createdAt:Date.now(),cosmicTokens:100,spinnerUsed:0,lastSpinTime:0};if(a.uid&&i.db){let t=(0,r.H9)(i.db,"userProfiles",a.uid),s=await (0,r.x7)(t);s.exists()?m({...e,...s.data()}):(await (0,r.BN)(t,{...e,createdAt:Date.now(),lastUpdated:Date.now()}),m(e))}else m(e)}catch(e){g("Failed to load profile data"),a&&m({displayName:a.displayName||"",photoURL:a.photoURL||"",email:a.email||"",username:a.email?a.email.split("@")[0]:"",profileMusic:null,musicType:null})}finally{x(!1)}}()},[a,i.db]);let y=async e=>{if(a){b(!0),g(null);try{if(e.displayName||e.photoURL){let t={};e.displayName&&(t.displayName=e.displayName),e.photoURL&&(t.photoURL=e.photoURL),await (0,n.r7)(a,t)}if(void 0!==e.cosmicTokens){if(e.cosmicTokens<0)throw Error("Token amount cannot be negative");e.cosmicTokens=Number(e.cosmicTokens)}if(a.uid&&i.db){let t=(0,r.H9)(i.db,"userProfiles",a.uid),s={...e,lastUpdated:Date.now()};await (0,r.mZ)(t,s);let l=(await (0,r.x7)(t)).data();m(e=>e?{...e,...l}:null)}else m(t=>t?{...t,...e}:null)}catch(e){throw g("Failed to update profile"),e}finally{b(!1)}}},j=async e=>{if(!a)throw Error("User not authenticated");b(!0),g(null);try{if(e.size>2097152)throw Error("Image file is too large. Please select a file under 2MB.");if(!e.type.startsWith("image/"))throw Error("Please select a valid image file (JPG, PNG, etc.)");let t=(0,o.KR)(i.IG,"profile-images/".concat(a.uid,"/").concat(Date.now(),"-").concat(e.name));if((null==u?void 0:u.photoURL)&&u.photoURL.includes("firebasestorage.googleapis.com"))try{let e=(0,o.KR)(i.IG,u.photoURL);await (0,o.XR)(e)}catch(e){}await (0,o.D)(t,e);let s=await (0,o.qk)(t);return await y({photoURL:s}),s}catch(e){throw g(e instanceof Error?e.message:"Failed to upload profile image"),e}finally{b(!1)}},w=async e=>{if(a){b(!0),g(null);try{a.uid&&await y({gameTiers:e})}catch(e){throw g("Failed to update game tiers"),e}finally{b(!1)}}},N=async(e,t)=>{if(!a||!a.email)throw Error("User not authenticated or email not available");b(!0),g(null);try{let s=n.IX.credential(a.email,e);await (0,n.kZ)(a,s),await (0,n.f3)(a,t)}catch(e){throw"auth/wrong-password"===e.code?g("Current password is incorrect"):g("Failed to change password"),e}finally{b(!1)}},v=async(e,t)=>{if(!a||!a.email)throw Error("User not authenticated or email not available");b(!0),g(null);try{let s=n.IX.credential(a.email,e);await (0,n.kZ)(a,s),await (0,n.Ww)(a,t),await y({email:t})}catch(e){throw"auth/wrong-password"===e.code?g("Current password is incorrect"):"auth/email-already-in-use"===e.code?g("This email is already in use by another account"):g("Failed to change email"),e}finally{b(!1)}};return(0,s.jsx)(d.Provider,{value:{profile:u,loading:p,updating:f,error:h,updateProfileData:y,uploadProfileImage:j,changePassword:N,changeEmail:v,updateAllGameTiers:w},children:t})}},6645:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let s=a(8229)._(a(7357));function l(e,t){var a;let l={};"function"==typeof e&&(l.loader=e);let r={...l,...t};return(0,s.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6654:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let s=a(2115);function l(e,t){let a=(0,s.useRef)(null),l=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=a.current;e&&(a.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(a.current=r(e,s)),t&&(l.current=r(t,s))},[e,t])}function r(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let s=a(5155),l=a(2115),r=a(2146);function n(e){return{default:e&&"default"in e?e.default:e}}a(255);let o={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},i=function(e){let t={...o,...e},a=(0,l.lazy)(()=>t.loader().then(n)),i=t.loading;function c(e){let n=i?(0,s.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?l.Suspense:l.Fragment,d=t.ssr?(0,s.jsxs)(s.Fragment,{children:[null,(0,s.jsx)(a,{...e})]}):(0,s.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(a,{...e})});return(0,s.jsx)(c,{...o?{fallback:n}:{},children:d})}return c.displayName="LoadableComponent",c}},7371:(e,t,a)=>{Promise.resolve().then(a.bind(a,2390))},7828:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return s}});let s=(0,a(4054).createAsyncLocalStorage)()}},e=>{var t=t=>e(e.s=t);e.O(0,[611,416,835,874,441,684,358],()=>t(7371)),_N_E=e.O()}]);
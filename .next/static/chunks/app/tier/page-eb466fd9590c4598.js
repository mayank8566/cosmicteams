(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{2981:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var l=t(5155),s=t(2115),i=t(5695),r=t(5928),o=t(6493),n=t(8596);let c=[{value:"neth-op",label:"Nether OP",icon:"/images/neth-op.svg"},{value:"axe",label:"Axe",icon:"/images/axe.svg"},{value:"smp",label:"SMP",icon:"/images/smp.svg"},{value:"cpvp",label:"Crystal PVP",icon:"/images/cpvp.svg"},{value:"sword",label:"Sword",icon:"/images/sword.svg"},{value:"uhc",label:"UHC",icon:"/images/uhc.svg"}];function d(){let e=(0,i.useRouter)(),{user:a}=(0,r.A)(),{profile:t,loading:d}=(0,o.x)(),[u,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{m(!0),a||d||e.push("/login")},[a,d,e]);let h=e=>e.startsWith("LT")?"tier-lt tier-lt-".concat(e.charAt(2)):"tier-ht tier-ht-".concat(e.charAt(2));return u&&!d&&a&&t?(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center gradient-text",children:"Your Game Tiers"}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6 mb-8",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,l.jsx)("div",{className:"w-24 h-24 relative mb-4",children:(0,l.jsx)(n.A,{src:t.photoURL||"/images/default-avatar.svg",alt:"Profile",width:96,height:96,className:"rounded-full object-cover mx-auto border-4 border-purple-600",fallbackSrc:"/images/default-avatar.svg"})}),(0,l.jsx)("h2",{className:"text-2xl font-semibold text-white",children:t.displayName})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:c.map(e=>{var a,s,i,r;return(0,l.jsx)("div",{className:"tier-card",children:(0,l.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 hover:bg-gray-700/80 transition-all duration-300 flex flex-col items-center",children:[(0,l.jsx)("div",{className:"n-icon mb-2",children:(0,l.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-800 flex items-center justify-center p-2 border-2 border-purple-500",children:(0,l.jsx)("img",{src:e.icon,alt:e.label,className:"w-10 h-10 object-contain"})})}),(0,l.jsx)("h3",{className:"text-lg font-medium text-white mb-1",children:e.label}),(0,l.jsx)("div",{className:"cur-tier ".concat(h((null===(a=t.gameTiers)||void 0===a?void 0:a[e.value])||"LT1")),children:(0,l.jsx)("p",{className:"text-2xl font-bold",children:(null===(s=t.gameTiers)||void 0===s?void 0:s[e.value])||"LT1"})}),(0,l.jsxs)("div",{className:"mt-2 text-sm text-gray-300",children:[(null===(i=t.gameTiers)||void 0===i?void 0:i[e.value].startsWith("LT"))?"Low Tier":"High Tier"," ",null===(r=t.gameTiers)||void 0===r?void 0:r[e.value].charAt(2)]})]})},e.value)})}),(0,l.jsx)("div",{className:"flex justify-center space-x-4 mt-8 pt-4 border-t border-gray-700",children:(0,l.jsx)("button",{onClick:()=>e.push("/profile"),className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Update Your Tiers"})})]})]}):(0,l.jsx)("div",{className:"container mx-auto p-4 min-h-screen flex items-center justify-center",children:(0,l.jsx)("div",{id:"loading-screen",children:(0,l.jsxs)("div",{className:"line-loader",children:[(0,l.jsx)("span",{}),(0,l.jsx)("span",{}),(0,l.jsx)("span",{}),(0,l.jsx)("span",{})]})})})}},5288:(e,a,t)=>{Promise.resolve().then(t.bind(t,2981))},5695:(e,a,t)=>{"use strict";var l=t(8999);t.o(l,"usePathname")&&t.d(a,{usePathname:function(){return l.usePathname}}),t.o(l,"useRouter")&&t.d(a,{useRouter:function(){return l.useRouter}})},5928:(e,a,t)=>{"use strict";t.d(a,{A:()=>c,O:()=>d});var l=t(5155),s=t(2115),i=t(6203),r=t(6104),o=t(5317);let n=(0,s.createContext)(null);function c(){let e=(0,s.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){let{children:a}=e,[t,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,i.hg)(r.j2,e=>{c(e),u(!1)});return(0,i.Q4)(r.j2).then(e=>{(null==e?void 0:e.user)&&c(e.user)}).catch(e=>{}),e},[]);let m=async(e,a,t)=>{let l=await (0,i.eJ)(r.j2,e,a),s=l.user;return t&&s&&(await (0,i.r7)(s,{displayName:t}),await (0,o.BN)((0,o.H9)(r.db,"userProfiles",s.uid),{email:s.email,username:t,displayName:t,createdAt:(0,o.O5)(),hasSetUsername:!0})),l},h=async()=>{try{r.hJ.setCustomParameters({prompt:"select_account"});let a=await (0,i.df)(r.j2,r.hJ,i.hk),t=a.user;if(t){var e;await (0,o.BN)((0,o.H9)(r.db,"userProfiles",t.uid),{email:t.email,displayName:t.displayName||(null===(e=t.email)||void 0===e?void 0:e.split("@")[0])||"User",photoURL:t.photoURL,createdAt:(0,o.O5)(),lastLogin:(0,o.O5)(),hasSetUsername:!1},{merge:!0})}return a}catch(e){if("auth/popup-blocked"===e.code||"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code){await (0,i.$2)(r.j2,r.hJ);return}throw e}};return(0,l.jsx)(n.Provider,{value:{user:t,loading:d,signUp:m,signIn:(e,a)=>(0,i.x9)(r.j2,e,a),signInWithGoogle:h,logout:()=>(0,i.CI)(r.j2)},children:a})}},6104:(e,a,t)=>{"use strict";let l;t.d(a,{IG:()=>d,db:()=>c,hJ:()=>u,j2:()=>n});var s=t(3915),i=t(6203),r=t(5317),o=t(858);let n=null,c=null,d=null,u=null;(l=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)({apiKey:"AIzaSyCQf_QXzyZkyRxsbo91PJmdwjEn3lVfDTo",authDomain:"cosmicteams-bbf29.firebaseapp.com",projectId:"cosmicteams-bbf29",storageBucket:"cosmicteams-bbf29.appspot.com",messagingSenderId:"807144888137",appId:"1:807144888137:web:2621a3ac917d9675d6ec98"}))&&(n=(0,i.xI)(l),c=(0,r.aU)(l),d=(0,o.c7)(l),u=new i.HF)},6493:(e,a,t)=>{"use strict";t.d(a,{H:()=>m,x:()=>u});var l=t(5155),s=t(2115),i=t(5317),r=t(6203),o=t(858),n=t(6104),c=t(5928);let d=(0,s.createContext)(null);function u(){let e=(0,s.useContext)(d);if(!e)throw Error("useProfile must be used within a ProfileProvider");return e}function m(e){let{children:a}=e,{user:t}=(0,c.A)(),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(!0),[f,g]=(0,s.useState)(!1),[v,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){if(!t){m(null),p(!1);return}p(!0);try{let e={displayName:t.displayName||"",photoURL:t.photoURL||"",email:t.email||"",username:t.email?t.email.split("@")[0]:"",profileMusic:null,musicType:null,gameTiers:{"neth-op":"LT1",axe:"LT1",smp:"LT1",cpvp:"LT1",sword:"LT1",uhc:"LT1"},canCreateTeams:!0,lastUpdated:Date.now(),createdAt:Date.now(),cosmicTokens:100,spinnerUsed:0,lastSpinTime:0};if(t.uid&&n.db){let a=(0,i.H9)(n.db,"userProfiles",t.uid),l=await (0,i.x7)(a);l.exists()?m({...e,...l.data()}):(await (0,i.BN)(a,{...e,createdAt:Date.now(),lastUpdated:Date.now()}),m(e))}else m(e)}catch(e){x("Failed to load profile data"),t&&m({displayName:t.displayName||"",photoURL:t.photoURL||"",email:t.email||"",username:t.email?t.email.split("@")[0]:"",profileMusic:null,musicType:null})}finally{p(!1)}}()},[t,n.db]);let w=async e=>{if(t){g(!0),x(null);try{if(e.displayName||e.photoURL){let a={};e.displayName&&(a.displayName=e.displayName),e.photoURL&&(a.photoURL=e.photoURL),await (0,r.r7)(t,a)}if(void 0!==e.cosmicTokens){if(e.cosmicTokens<0)throw Error("Token amount cannot be negative");e.cosmicTokens=Number(e.cosmicTokens)}if(t.uid&&n.db){let a=(0,i.H9)(n.db,"userProfiles",t.uid),l={...e,lastUpdated:Date.now()};await (0,i.mZ)(a,l);let s=(await (0,i.x7)(a)).data();m(e=>e?{...e,...s}:null)}else m(a=>a?{...a,...e}:null)}catch(e){throw x("Failed to update profile"),e}finally{g(!1)}}},b=async e=>{if(!t)throw Error("User not authenticated");g(!0),x(null);try{if(e.size>2097152)throw Error("Image file is too large. Please select a file under 2MB.");if(!e.type.startsWith("image/"))throw Error("Please select a valid image file (JPG, PNG, etc.)");let a=(0,o.KR)(n.IG,"profile-images/".concat(t.uid,"/").concat(Date.now(),"-").concat(e.name));if((null==u?void 0:u.photoURL)&&u.photoURL.includes("firebasestorage.googleapis.com"))try{let e=(0,o.KR)(n.IG,u.photoURL);await (0,o.XR)(e)}catch(e){}await (0,o.D)(a,e);let l=await (0,o.qk)(a);return await w({photoURL:l}),l}catch(e){throw x(e instanceof Error?e.message:"Failed to upload profile image"),e}finally{g(!1)}},y=async e=>{if(t){g(!0),x(null);try{t.uid&&await w({gameTiers:e})}catch(e){throw x("Failed to update game tiers"),e}finally{g(!1)}}},N=async(e,a)=>{if(!t||!t.email)throw Error("User not authenticated or email not available");g(!0),x(null);try{let l=r.IX.credential(t.email,e);await (0,r.kZ)(t,l),await (0,r.f3)(t,a)}catch(e){throw"auth/wrong-password"===e.code?x("Current password is incorrect"):x("Failed to change password"),e}finally{g(!1)}},j=async(e,a)=>{if(!t||!t.email)throw Error("User not authenticated or email not available");g(!0),x(null);try{let l=r.IX.credential(t.email,e);await (0,r.kZ)(t,l),await (0,r.Ww)(t,a),await w({email:a})}catch(e){throw"auth/wrong-password"===e.code?x("Current password is incorrect"):"auth/email-already-in-use"===e.code?x("This email is already in use by another account"):x("Failed to change email"),e}finally{g(!1)}};return(0,l.jsx)(d.Provider,{value:{profile:u,loading:h,updating:f,error:v,updateProfileData:w,uploadProfileImage:b,changePassword:N,changeEmail:j,updateAllGameTiers:y},children:a})}},8596:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var l=t(5155),s=t(2115),i=t(6766);function r(e){let{src:a,alt:t,fallbackSrc:r="/images/default-avatar.svg",...o}=e,[n,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(a),[m,h]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{c(!0)},[]),(0,s.useEffect)(()=>{a&&(u(a),h(!1))},[a]),!d&&!m){if(!n)return(0,l.jsx)("div",{className:"bg-space-blue/50 ".concat(o.className||""),style:{width:o.width||"100%",height:o.height||"100%"},"aria-label":t||"Image placeholder"});h(!0),u(r)}return n?(0,l.jsx)(i.default,{...o,src:d||r,alt:t,onError:()=>{h(!0),u(r)},unoptimized:!0,"data-client-image":"true"}):(0,l.jsx)("div",{className:"bg-space-blue/50 ".concat(o.className||""),style:{width:o.width||"100%",height:o.height||"100%"},"aria-label":t||"Image placeholder","data-ssr-placeholder":"true"})}}},e=>{var a=a=>e(e.s=a);e.O(0,[611,794,288,766,441,684,358],()=>a(5288)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{255:(e,a,t)=>{"use strict";function r(e){let{moduleIds:a}=e;return null}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"PreloadChunks",{enumerable:!0,get:function(){return r}}),t(5155),t(7650),t(5744),t(589)},440:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var r=t(5155),o=t(2115),n=t(5695),i=t(5928),s=t(6493),c=t(1584),l=t(5028),d=t(5317),u=t(6104),p=t(6874),m=t.n(p);let f=(0,l.default)(()=>t.e(422).then(t.bind(t,5422)),{loadableGenerated:{webpack:()=>[5422]},loading:()=>(0,r.jsx)("div",{className:"w-16 h-16 mx-auto bg-space-blue/30 rounded-full animate-pulse"}),ssr:!1}),g=(0,l.default)(()=>t.e(667).then(t.bind(t,6667)),{loadableGenerated:{webpack:()=>[6667]},loading:()=>(0,r.jsx)("div",{className:"w-full h-8 bg-space-blue/30 rounded-md animate-pulse"}),ssr:!1}),b=(0,l.default)(()=>t.e(205).then(t.bind(t,4205)),{loadableGenerated:{webpack:()=>[4205]},loading:()=>(0,r.jsx)("div",{className:"w-full h-12 bg-space-blue/30 rounded-md animate-pulse"}),ssr:!1}),h=(0,l.default)(()=>t.e(72).then(t.bind(t,8072)),{loadableGenerated:{webpack:()=>[8072]},loading:()=>(0,r.jsx)("div",{className:"w-full h-16 bg-space-blue/30 rounded-md animate-pulse"}),ssr:!1}),y=(0,l.default)(()=>t.e(452).then(t.bind(t,452)),{loadableGenerated:{webpack:()=>[452]},loading:()=>(0,r.jsx)("div",{className:"w-16 h-16 mx-auto bg-space-blue/30 rounded-full animate-pulse"}),ssr:!1});function x(){let e=(0,n.useRouter)(),{user:a}=(0,i.A)(),{profile:t,updateProfileData:l}=(0,s.x)(),[p,x]=(0,o.useState)("all"),[w,v]=(0,o.useState)(!1),[k,j]=(0,o.useState)(null),[N,A]=(0,o.useState)([]),[P,S]=(0,o.useState)(!0),T=[{id:"avatar-neon-inferno",name:"Inferno Frame",description:"A deadly-looking frame with blood-red neon flames that pulse and glow.",price:2e3,category:"avatar",image:"/marketplace/avatar-neon-inferno.png",effect:"neon-inferno",preview:(0,r.jsx)(y,{effect:"neon-inferno"})},{id:"avatar-neon-vortex",name:"Vortex Frame",description:"A deadly-looking electric blue neon frame that constantly rotates around your avatar.",price:2200,category:"avatar",image:"/marketplace/avatar-neon-vortex.png",effect:"neon-vortex",preview:(0,r.jsx)(y,{effect:"neon-vortex"})},{id:"avatar-neon-shadow",name:"Shadow Frame",description:"A deadly-looking dark purple neon frame that flickers ominously like a shadow.",price:2500,category:"avatar",image:"/marketplace/avatar-neon-shadow.png",effect:"neon-shadow",preview:(0,r.jsx)(y,{effect:"neon-shadow"})},{id:"avatar-neon-toxic",name:"Toxic Frame",description:"A deadly-looking radioactive green neon frame that shifts colors like toxic waste.",price:2800,category:"avatar",image:"/marketplace/avatar-neon-toxic.png",effect:"neon-toxic",preview:(0,r.jsx)(y,{effect:"neon-toxic"})},{id:"avatar-neon-cyber",name:"Cyber Frame",description:"A deadly-looking cyberpunk yellow neon frame with circuit patterns that pulse rapidly.",price:3e3,category:"avatar",image:"/marketplace/avatar-neon-cyber.png",effect:"neon-cyber",preview:(0,r.jsx)(y,{effect:"neon-cyber"})},{id:"banner-gradient",name:"Gradient Team Banner",description:"A smooth gradient banner for your team profile.",price:300,category:"banner",image:"/marketplace/banner-gradient.png",effect:"gradient",preview:(0,r.jsx)(g,{effect:"gradient"})},{id:"banner-animated",name:"Animated Team Banner",description:"A flowing animated gradient banner that catches attention.",price:500,category:"banner",image:"/marketplace/banner-animated.png",effect:"animated",preview:(0,r.jsx)(g,{effect:"animated"})},{id:"banner-cosmic",name:"Cosmic Team Banner",description:"A deep space banner with subtle star effects.",price:700,category:"banner",image:"/marketplace/banner-cosmic.png",effect:"cosmic",preview:(0,r.jsx)(g,{effect:"cosmic"})},{id:"banner-sparkle",name:"Sparkle Team Banner",description:"A banner with twinkling star effects.",price:800,category:"banner",image:"/marketplace/banner-sparkle.png",effect:"sparkle",preview:(0,r.jsx)(g,{effect:"sparkle"})},{id:"logo-rotating",name:"Rotating Logo Effect",description:"Make your team logo slowly rotate for a dynamic look.",price:1e3,category:"logo",image:"/marketplace/logo-rotating.png",effect:"rotating",preview:(0,r.jsx)(f,{effect:"rotating"})},{id:"logo-glowing",name:"Glowing Logo Effect",description:"Add a pulsing glow effect to your team logo.",price:1200,category:"logo",image:"/marketplace/logo-glowing.png",effect:"glowing",preview:(0,r.jsx)(f,{effect:"glowing"})},{id:"logo-particles",name:"Particle Logo Effect",description:"Small particles float up around your team logo.",price:1500,category:"logo",image:"/marketplace/logo-particles.png",effect:"particles",preview:(0,r.jsx)(f,{effect:"particles"})},{id:"logo-plasma-ring",name:"Plasma Ring Logo Effect",description:"A plasma ring effect that surrounds your team logo.",price:1800,category:"logo",image:"/marketplace/logo-plasma-ring.png",effect:"plasma-ring",preview:(0,r.jsx)(f,{effect:"plasma-ring"})},{id:"logo-neon-burst",name:"Neon Burst Logo Effect",description:"A neon burst effect that surrounds your team logo.",price:2e3,category:"logo",image:"/marketplace/logo-neon-burst.png",effect:"neon-burst",preview:(0,r.jsx)(f,{effect:"neon-burst"})},{id:"logo-hologram",name:"Hologram Logo Effect",description:"A hologram effect that makes your team logo look futuristic.",price:2200,category:"logo",image:"/marketplace/logo-hologram.png",effect:"hologram",preview:(0,r.jsx)(f,{effect:"hologram"})},{id:"logo-fire-aura",name:"Fire Aura Logo Effect",description:"A fire aura effect that surrounds your team logo.",price:2500,category:"logo",image:"/marketplace/logo-fire-aura.png",effect:"fire-aura",preview:(0,r.jsx)(f,{effect:"fire-aura"})},{id:"bg-nebula",name:"Nebula Background",description:"A cosmic nebula background for your team page.",price:800,category:"background",image:"/marketplace/bg-nebula.png",effect:"nebula",preview:(0,r.jsx)(b,{effect:"nebula"})},{id:"bg-aurora",name:"Aurora Background",description:"Northern lights inspired animated background.",price:1e3,category:"background",image:"/marketplace/bg-aurora.png",effect:"aurora",preview:(0,r.jsx)(b,{effect:"aurora"})},{id:"bg-space",name:"Deep Space Background",description:"A dark space background with subtle stars.",price:1200,category:"background",image:"/marketplace/bg-space.png",effect:"space",preview:(0,r.jsx)(b,{effect:"space"})},{id:"bg-galaxy",name:"Galaxy Background",description:"A colorful galaxy background with animation.",price:1500,category:"background",image:"/marketplace/bg-galaxy.png",effect:"galaxy",preview:(0,r.jsx)(b,{effect:"galaxy"})},{id:"boost-daily",name:"Daily Points Boost (7 days)",description:"Earn 10% more team points for 7 days.",price:1e3,category:"boost",image:"/marketplace/boost-daily.png"},{id:"feature-analytics",name:"Team Analytics Pro",description:"Unlock advanced team performance analytics.",price:2e3,category:"feature",image:"/marketplace/feature-analytics.png"},{id:"avatar-gold-frame",name:"Gold Frame Avatar Decoration",description:"A luxurious gold frame for your team avatar.",price:800,category:"avatar",image:"/marketplace/avatar-gold-frame.png",effect:"gold-frame",preview:(0,r.jsx)(y,{effect:"gold-frame"})},{id:"avatar-cosmic-frame",name:"Cosmic Spinner Frame",description:"A rotating cosmic frame for your avatar that draws attention.",price:1500,category:"avatar",image:"/marketplace/avatar-cosmic-frame.png",effect:"cosmic-frame",preview:(0,r.jsx)(y,{effect:"cosmic-frame"})},{id:"avatar-silver-frame",name:"Silver Elite Frame",description:"A sleek silver frame for your team avatar.",price:1e3,category:"avatar",image:"/marketplace/avatar-silver-frame.png",effect:"silver-frame",preview:(0,r.jsx)(y,{effect:"silver-frame"})},{id:"avatar-diamond-frame",name:"Rainbow Diamond Frame",description:"A premium diamond frame with color-shifting effects.",price:2e3,category:"avatar",image:"/marketplace/avatar-diamond-frame.png",effect:"diamond-frame",preview:(0,r.jsx)(y,{effect:"diamond-frame"})},{id:"avatar-crown",name:"Crown Avatar Decoration",description:"A royal crown for your team avatar.",price:1e3,category:"avatar",image:"/marketplace/avatar-crown.png",effect:"crown",preview:(0,r.jsx)(y,{effect:"crown"})},{id:"avatar-cosmic-aura",name:"Cosmic Aura Avatar Decoration",description:"A cosmic aura effect for your team avatar.",price:1200,category:"avatar",image:"/marketplace/avatar-cosmic-aura.png",effect:"cosmic-aura",preview:(0,r.jsx)(y,{effect:"cosmic-aura"})},{id:"avatar-stars",name:"Stars Avatar Decoration",description:"Twinkling stars around your team avatar.",price:1500,category:"avatar",image:"/marketplace/avatar-stars.png",effect:"stars",preview:(0,r.jsx)(y,{effect:"stars"})},{id:"avatar-halo",name:"Halo Avatar Decoration",description:"A shining halo for your team avatar.",price:1800,category:"avatar",image:"/marketplace/avatar-halo.png",effect:"halo",preview:(0,r.jsx)(y,{effect:"halo"})},{id:"profile-cosmic-stars",name:"Cosmic Stars Background",description:"Adds a beautiful starry cosmic background to your profile page.",price:1200,category:"background",image:"/marketplace/profile-cosmic-stars.png",effect:"cosmic-stars",preview:(0,r.jsx)(h,{effect:"cosmic-stars"})},{id:"profile-aurora-waves",name:"Aurora Waves Background",description:"Adds flowing aurora wave effects to your profile page background.",price:1500,category:"background",image:"/marketplace/profile-aurora-waves.png",effect:"aurora-waves",preview:(0,r.jsx)(h,{effect:"aurora-waves"})},{id:"profile-plasma-field",name:"Plasma Field Background",description:"Adds a dynamic plasma field effect to your profile page.",price:1800,category:"background",image:"/marketplace/profile-plasma-field.png",effect:"plasma-field",preview:(0,r.jsx)(h,{effect:"plasma-field"})},{id:"profile-neon-grid",name:"Neon Grid Background",description:"Adds a cyberpunk-inspired neon grid effect to your profile.",price:2e3,category:"background",image:"/marketplace/profile-neon-grid.png",effect:"neon-grid",preview:(0,r.jsx)(h,{effect:"neon-grid"})},{id:"profile-galaxy-swirl",name:"Galaxy Swirl Background",description:"Adds a mesmerizing galaxy swirl effect to your profile background.",price:2200,category:"background",image:"/marketplace/profile-galaxy-swirl.png",effect:"galaxy-swirl",preview:(0,r.jsx)(h,{effect:"galaxy-swirl"})}];(0,o.useEffect)(()=>{if(!a){e.push("/login");return}(async()=>{try{if(S(!0),a.email){let e=(0,d.H9)(u.db,"users",a.email),t=await (0,d.x7)(e);if(t.exists()){let e=t.data();A(e.purchasedItems||[])}}}catch(e){}finally{S(!1)}})()},[a,e]);let C="all"===p?T:T.filter(e=>e.category===p),_=async e=>{if(!a||!t){j({type:"error",text:"You must be logged in to make purchases."});return}if(N.includes(e.id)){j({type:"error",text:"You already own this item."});return}let r=t.cosmicTokens||0;if(r<e.price){j({type:"error",text:"Not enough tokens. You need ".concat(e.price-r," more tokens.")});return}try{v(!0),j(null);let o=(0,d.H9)(u.db,"userProfiles",a.uid),n={cosmicTokens:r-e.price,purchasedItems:(0,d.hq)(e.id)};"background"===e.category?n.backgrounds=(0,d.hq)(e.id):"banner"===e.category?n.teamBanners=(0,d.hq)(e.id):"avatar"===e.category?n.avatars=(0,d.hq)(e.id):"profile"===e.category&&(n.profileDecorations=(0,d.hq)(e.id)),await (0,d.mZ)(o,n);let i={cosmicTokens:r-e.price,purchasedItems:[...t.purchasedItems||[],e.id]};"background"===e.category?i.backgrounds=[...t.backgrounds||[],e.id]:"banner"===e.category?i.teamBanners=[...t.teamBanners||[],e.id]:"avatar"===e.category?i.avatars=[...t.avatars||[],e.id]:"profile"===e.category&&(i.profileDecorations=[...t.profileDecorations||[],e.id]),await l(i),A(a=>[...a,e.id]),j({type:"success",text:"Successfully purchased ".concat(e.name,"!")})}catch(e){j({type:"error",text:"Error processing your purchase. Please try again."})}finally{v(!1)}};return(0,r.jsxs)("main",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(c.A,{}),(0,r.jsxs)("div",{className:"flex-1 px-6 py-12 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute w-96 h-96 rounded-full bg-space-purple/20 blur-3xl -top-48 -left-48 animate-pulse-slow"}),(0,r.jsx)("div",{className:"absolute w-80 h-80 rounded-full bg-space-indigo/20 blur-3xl bottom-0 right-0 animate-pulse-slow delay-1000"}),(0,r.jsx)("div",{className:"absolute w-64 h-64 rounded-full bg-space-cyan/10 blur-3xl top-1/3 left-1/3 animate-pulse-slow delay-2000"})]}),(0,r.jsxs)("div",{className:"container mx-auto max-w-6xl",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold font-space mb-2 animate-fade-in-up",children:(0,r.jsx)("span",{className:"gradient-text cosmic-gradient",children:"Marketplace"})}),(0,r.jsx)("p",{className:"text-cosmic-text-secondary animate-fade-in-up",style:{animationDelay:"100ms"},children:"Upgrade your team with exclusive items and features"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-space-blue/30 rounded-lg border border-space-blue/40",children:[(0,r.jsx)("div",{className:"text-space-gold font-bold",children:(null==t?void 0:t.cosmicTokens)||0}),(0,r.jsx)("div",{className:"text-sm text-cosmic-text-secondary",children:"Cosmic Tokens"}),(0,r.jsx)(m(),{href:"/spinner",className:"btn-gradient-secondary text-sm py-1 px-3 ml-2",children:"Get More"})]})]}),k&&(0,r.jsx)("div",{className:"mb-6 p-4 rounded-lg border ".concat("success"===k.type?"bg-green-900/30 border-green-500/50 text-green-300":"bg-red-900/30 border-red-500/50 text-red-300"," animate-fade-in"),children:k.text}),(0,r.jsxs)("div",{className:"flex overflow-x-auto space-x-4 mb-8 pb-2 animate-fade-in-up",style:{animationDelay:"150ms"},children:[(0,r.jsx)("button",{onClick:()=>x("all"),className:"px-4 py-2 rounded-full whitespace-nowrap transition-all ".concat("all"===p?"bg-space-indigo text-white cosmic-shadow-sm":"bg-space-blue/30 text-cosmic-text-secondary hover:bg-space-blue/50"),children:"All Items"}),(0,r.jsx)("button",{onClick:()=>x("banner"),className:"px-4 py-2 rounded-full whitespace-nowrap transition-all ".concat("banner"===p?"bg-space-indigo text-white cosmic-shadow-sm":"bg-space-blue/30 text-cosmic-text-secondary hover:bg-space-blue/50"),children:"Team Banners"}),(0,r.jsx)("button",{onClick:()=>x("logo"),className:"px-4 py-2 rounded-full whitespace-nowrap transition-all ".concat("logo"===p?"bg-space-indigo text-white cosmic-shadow-sm":"bg-space-blue/30 text-cosmic-text-secondary hover:bg-space-blue/50"),children:"Logo Effects"}),(0,r.jsx)("button",{onClick:()=>x("background"),className:"px-4 py-2 rounded-full whitespace-nowrap transition-all ".concat("background"===p?"bg-space-indigo text-white cosmic-shadow-sm":"bg-space-blue/30 text-cosmic-text-secondary hover:bg-space-blue/50"),children:"Backgrounds"}),(0,r.jsx)("button",{onClick:()=>x("boost"),className:"px-4 py-2 rounded-full whitespace-nowrap transition-all ".concat("boost"===p?"bg-space-indigo text-white cosmic-shadow-sm":"bg-space-blue/30 text-cosmic-text-secondary hover:bg-space-blue/50"),children:"Boosts"}),(0,r.jsx)("button",{onClick:()=>x("feature"),className:"px-4 py-2 rounded-full whitespace-nowrap transition-all ".concat("feature"===p?"bg-space-indigo text-white cosmic-shadow-sm":"bg-space-blue/30 text-cosmic-text-secondary hover:bg-space-blue/50"),children:"Premium Features"}),(0,r.jsx)("button",{onClick:()=>x("avatar"),className:"px-4 py-2 rounded-full whitespace-nowrap transition-all ".concat("avatar"===p?"bg-space-indigo text-white cosmic-shadow-sm":"bg-space-blue/30 text-cosmic-text-secondary hover:bg-space-blue/50"),children:"Avatars"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in-up",style:{animationDelay:"200ms"},children:C.map(e=>{let a=N.includes(e.id);return(0,r.jsxs)("div",{className:"cosmic-card border border-space-purple/30 cosmic-shadow-sm hover:cosmic-shadow-md transition-all group overflow-hidden",children:[(0,r.jsxs)("div",{className:"h-48 bg-space-blue/30 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-space-indigo/10 to-space-purple/30"}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:e.preview?e.preview:(0,r.jsx)("div",{className:"text-6xl opacity-70",children:"\uD83D\uDE80"})}),a&&(0,r.jsx)("div",{className:"absolute top-2 right-2 bg-space-gold text-space-dark text-xs font-bold px-2 py-1 rounded-full",children:"OWNED"})]}),(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-1 group-hover:text-space-cyan transition-colors",children:e.name}),(0,r.jsx)("p",{className:"text-cosmic-text-secondary text-sm mb-4",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"text-xl font-semibold text-space-gold",children:[e.price," tokens"]}),(0,r.jsx)("button",{onClick:()=>!a&&_(e),disabled:a||w,className:"px-3 py-1 rounded-md font-medium text-sm transition ".concat(a?"bg-space-blue/30 text-cosmic-text-secondary cursor-default":"btn-gradient-secondary"),children:a?"Owned":w?"Processing...":"Purchase"})]})]})]},e.id)})}),(0,r.jsxs)("div",{className:"mt-12 cosmic-card border border-space-cyan/30 p-6 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-space-cyan mb-2",children:"More Items Coming Soon!"}),(0,r.jsxs)("p",{className:"text-cosmic-text-secondary",children:["The Cosmic Teams marketplace is being expanded with new items regularly. Earn Cosmic Tokens with the ",(0,r.jsx)(m(),{href:"/spinner",className:"text-space-cyan hover:underline",children:"Cosmic Spinner"})," to purchase these items!"]})]})]})]})]})}},1584:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var r=t(5155);let o=(0,t(5028).default)(()=>Promise.all([t.e(766),t.e(874),t.e(615)]).then(t.bind(t,4615)),{loadableGenerated:{webpack:()=>[4615]},ssr:!1});function n(){return(0,r.jsx)(o,{})}},2146:(e,a,t)=>{"use strict";function r(e){let{reason:a,children:t}=e;return t}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),t(5262)},4054:(e,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return n},createSnapshot:function(){return s}});let t=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class r{disable(){throw t}getStore(){}run(){throw t}exit(){throw t}enterWith(){throw t}static bind(e){return e}}let o="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function n(){return o?new o:new r}function i(e){return o?o.bind(e):r.bind(e)}function s(){return o?o.snapshot():function(e,...a){return e(...a)}}},5028:(e,a,t)=>{"use strict";t.d(a,{default:()=>o.a});var r=t(6645),o=t.n(r)},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},5744:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"workAsyncStorage",{enumerable:!0,get:function(){return r.workAsyncStorageInstance}});let r=t(7828)},5928:(e,a,t)=>{"use strict";t.d(a,{A:()=>l,O:()=>d});var r=t(5155),o=t(2115),n=t(6203),i=t(6104),s=t(5317);let c=(0,o.createContext)(null);function l(){let e=(0,o.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){let{children:a}=e,[t,l]=(0,o.useState)(null),[d,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=(0,n.hg)(i.j2,e=>{l(e),u(!1)});return(0,n.Q4)(i.j2).then(e=>{(null==e?void 0:e.user)&&l(e.user)}).catch(e=>{}),e},[]);let p=async(e,a,t)=>{let r=await (0,n.eJ)(i.j2,e,a),o=r.user;return t&&o&&(await (0,n.r7)(o,{displayName:t}),await (0,s.BN)((0,s.H9)(i.db,"userProfiles",o.uid),{email:o.email,username:t,displayName:t,createdAt:(0,s.O5)(),hasSetUsername:!0})),r},m=async()=>{try{i.hJ.setCustomParameters({prompt:"select_account"});let a=await (0,n.df)(i.j2,i.hJ,n.hk),t=a.user;if(t){var e;await (0,s.BN)((0,s.H9)(i.db,"userProfiles",t.uid),{email:t.email,displayName:t.displayName||(null===(e=t.email)||void 0===e?void 0:e.split("@")[0])||"User",photoURL:t.photoURL,createdAt:(0,s.O5)(),lastLogin:(0,s.O5)(),hasSetUsername:!1},{merge:!0})}return a}catch(e){if("auth/popup-blocked"===e.code||"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code){await (0,n.$2)(i.j2,i.hJ);return}throw e}};return(0,r.jsx)(c.Provider,{value:{user:t,loading:d,signUp:p,signIn:(e,a)=>(0,n.x9)(i.j2,e,a),signInWithGoogle:m,logout:()=>(0,n.CI)(i.j2)},children:a})}},6104:(e,a,t)=>{"use strict";let r;t.d(a,{IG:()=>d,db:()=>l,hJ:()=>u,j2:()=>c});var o=t(3915),n=t(6203),i=t(5317),s=t(858);let c=null,l=null,d=null,u=null;(r=(0,o.Dk)().length?(0,o.Dk)()[0]:(0,o.Wp)({apiKey:"AIzaSyCQf_QXzyZkyRxsbo91PJmdwjEn3lVfDTo",authDomain:"cosmicteams-bbf29.firebaseapp.com",projectId:"cosmicteams-bbf29",storageBucket:"cosmicteams-bbf29.appspot.com",messagingSenderId:"807144888137",appId:"1:807144888137:web:2621a3ac917d9675d6ec98"}))&&(c=(0,n.xI)(r),l=(0,i.aU)(r),d=(0,s.c7)(r),u=new n.HF)},6493:(e,a,t)=>{"use strict";t.d(a,{H:()=>p,x:()=>u});var r=t(5155),o=t(2115),n=t(5317),i=t(6203),s=t(858),c=t(6104),l=t(5928);let d=(0,o.createContext)(null);function u(){let e=(0,o.useContext)(d);if(!e)throw Error("useProfile must be used within a ProfileProvider");return e}function p(e){let{children:a}=e,{user:t}=(0,l.A)(),[u,p]=(0,o.useState)(null),[m,f]=(0,o.useState)(!0),[g,b]=(0,o.useState)(!1),[h,y]=(0,o.useState)(null);(0,o.useEffect)(()=>{!async function(){if(!t){p(null),f(!1);return}f(!0);try{let e={displayName:t.displayName||"",photoURL:t.photoURL||"",email:t.email||"",username:t.email?t.email.split("@")[0]:"",profileMusic:null,musicType:null,gameTiers:{"neth-op":"LT1",axe:"LT1",smp:"LT1",cpvp:"LT1",sword:"LT1",uhc:"LT1"},canCreateTeams:!0,lastUpdated:Date.now(),createdAt:Date.now(),cosmicTokens:100,spinnerUsed:0,lastSpinTime:0};if(t.uid&&c.db){let a=(0,n.H9)(c.db,"userProfiles",t.uid),r=await (0,n.x7)(a);r.exists()?p({...e,...r.data()}):(await (0,n.BN)(a,{...e,createdAt:Date.now(),lastUpdated:Date.now()}),p(e))}else p(e)}catch(e){y("Failed to load profile data"),t&&p({displayName:t.displayName||"",photoURL:t.photoURL||"",email:t.email||"",username:t.email?t.email.split("@")[0]:"",profileMusic:null,musicType:null})}finally{f(!1)}}()},[t,c.db]);let x=async e=>{if(t){b(!0),y(null);try{if(e.displayName||e.photoURL){let a={};e.displayName&&(a.displayName=e.displayName),e.photoURL&&(a.photoURL=e.photoURL),await (0,i.r7)(t,a)}if(void 0!==e.cosmicTokens){if(e.cosmicTokens<0)throw Error("Token amount cannot be negative");e.cosmicTokens=Number(e.cosmicTokens)}if(t.uid&&c.db){let a=(0,n.H9)(c.db,"userProfiles",t.uid),r={...e,lastUpdated:Date.now()};await (0,n.mZ)(a,r);let o=(await (0,n.x7)(a)).data();p(e=>e?{...e,...o}:null)}else p(a=>a?{...a,...e}:null)}catch(e){throw y("Failed to update profile"),e}finally{b(!1)}}},w=async e=>{if(!t)throw Error("User not authenticated");b(!0),y(null);try{if(e.size>2097152)throw Error("Image file is too large. Please select a file under 2MB.");if(!e.type.startsWith("image/"))throw Error("Please select a valid image file (JPG, PNG, etc.)");let a=(0,s.KR)(c.IG,"profile-images/".concat(t.uid,"/").concat(Date.now(),"-").concat(e.name));if((null==u?void 0:u.photoURL)&&u.photoURL.includes("firebasestorage.googleapis.com"))try{let e=(0,s.KR)(c.IG,u.photoURL);await (0,s.XR)(e)}catch(e){}await (0,s.D)(a,e);let r=await (0,s.qk)(a);return await x({photoURL:r}),r}catch(e){throw y(e instanceof Error?e.message:"Failed to upload profile image"),e}finally{b(!1)}},v=async e=>{if(t){b(!0),y(null);try{t.uid&&await x({gameTiers:e})}catch(e){throw y("Failed to update game tiers"),e}finally{b(!1)}}},k=async(e,a)=>{if(!t||!t.email)throw Error("User not authenticated or email not available");b(!0),y(null);try{let r=i.IX.credential(t.email,e);await (0,i.kZ)(t,r),await (0,i.f3)(t,a)}catch(e){throw"auth/wrong-password"===e.code?y("Current password is incorrect"):y("Failed to change password"),e}finally{b(!1)}},j=async(e,a)=>{if(!t||!t.email)throw Error("User not authenticated or email not available");b(!0),y(null);try{let r=i.IX.credential(t.email,e);await (0,i.kZ)(t,r),await (0,i.Ww)(t,a),await x({email:a})}catch(e){throw"auth/wrong-password"===e.code?y("Current password is incorrect"):"auth/email-already-in-use"===e.code?y("This email is already in use by another account"):y("Failed to change email"),e}finally{b(!1)}};return(0,r.jsx)(d.Provider,{value:{profile:u,loading:m,updating:g,error:h,updateProfileData:x,uploadProfileImage:w,changePassword:k,changeEmail:j,updateAllGameTiers:v},children:a})}},6645:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return o}});let r=t(8229)._(t(7357));function o(e,a){var t;let o={};"function"==typeof e&&(o.loader=e);let n={...o,...a};return(0,r.default)({...n,modules:null==(t=n.loadableGenerated)?void 0:t.modules})}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},6654:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"useMergedRef",{enumerable:!0,get:function(){return o}});let r=t(2115);function o(e,a){let t=(0,r.useRef)(null),o=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=t.current;e&&(t.current=null,e());let a=o.current;a&&(o.current=null,a())}else e&&(t.current=n(e,r)),a&&(o.current=n(a,r))},[e,a])}function n(e,a){if("function"!=typeof e)return e.current=a,()=>{e.current=null};{let t=e(a);return"function"==typeof t?t:()=>e(null)}}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},7037:(e,a,t)=>{Promise.resolve().then(t.bind(t,440))},7357:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return c}});let r=t(5155),o=t(2115),n=t(2146);function i(e){return{default:e&&"default"in e?e.default:e}}t(255);let s={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let a={...s,...e},t=(0,o.lazy)(()=>a.loader().then(i)),c=a.loading;function l(e){let i=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,s=!a.ssr||!!a.loading,l=s?o.Suspense:o.Fragment,d=a.ssr?(0,r.jsxs)(r.Fragment,{children:[null,(0,r.jsx)(t,{...e})]}):(0,r.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(t,{...e})});return(0,r.jsx)(l,{...s?{fallback:i}:{},children:d})}return l.displayName="LoadableComponent",l}},7828:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"workAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,t(4054).createAsyncLocalStorage)()}},e=>{var a=a=>e(e.s=a);e.O(0,[611,794,288,874,441,684,358],()=>a(7037)),_N_E=e.O()}]);
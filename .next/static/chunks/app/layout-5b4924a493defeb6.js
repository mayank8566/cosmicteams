(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{527:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78",variable:"__variable_d65c78"}},2972:e=>{e.exports={style:{fontFamily:"'Space Grotesk', 'Space Grotesk Fallback'",fontStyle:"normal"},className:"__className_bc0dcf",variable:"__variable_bc0dcf"}},4247:(e,t,a)=>{"use strict";a.d(t,{L8:()=>i,Tp:()=>l,tu:()=>r});let l=()=>{window.addEventListener("load",()=>{let e=["/login","/register","/dashboard","/tier"];"requestIdleCallback"in window&&window.requestIdleCallback(()=>{e.forEach(e=>{let t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t)})})})},i=()=>{let e=()=>{document.querySelectorAll(".reveal").forEach(e=>{let t=window.innerHeight;e.getBoundingClientRect().top<t-150&&e.classList.add("active")})};return e(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},r=()=>{["https://identitytoolkit.googleapis.com","https://securetoken.googleapis.com"].forEach(e=>{let t=document.createElement("link");t.rel="preconnect",t.href=e,document.head.appendChild(t)})}},5786:()=>{},5928:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,O:()=>d});var l=a(5155),i=a(2115),r=a(6203),o=a(6104),s=a(5317);let n=(0,i.createContext)(null);function c(){let e=(0,i.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){let{children:t}=e,[a,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=(0,r.hg)(o.j2,e=>{c(e),u(!1)});return(0,r.Q4)(o.j2).then(e=>{(null==e?void 0:e.user)&&c(e.user)}).catch(e=>{}),e},[]);let m=async(e,t,a)=>{let l=await (0,r.eJ)(o.j2,e,t),i=l.user;return a&&i&&(await (0,r.r7)(i,{displayName:a}),await (0,s.BN)((0,s.H9)(o.db,"userProfiles",i.uid),{email:i.email,username:a,displayName:a,createdAt:(0,s.O5)(),hasSetUsername:!0})),l},p=async()=>{try{o.hJ.setCustomParameters({prompt:"select_account"});let t=await (0,r.df)(o.j2,o.hJ,r.hk),a=t.user;if(a){var e;await (0,s.BN)((0,s.H9)(o.db,"userProfiles",a.uid),{email:a.email,displayName:a.displayName||(null===(e=a.email)||void 0===e?void 0:e.split("@")[0])||"User",photoURL:a.photoURL,createdAt:(0,s.O5)(),lastLogin:(0,s.O5)(),hasSetUsername:!1},{merge:!0})}return t}catch(e){if("auth/popup-blocked"===e.code||"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code){await (0,r.$2)(o.j2,o.hJ);return}throw e}};return(0,l.jsx)(n.Provider,{value:{user:a,loading:d,signUp:m,signIn:(e,t)=>(0,r.x9)(o.j2,e,t),signInWithGoogle:p,logout:()=>(0,r.CI)(o.j2)},children:t})}},6078:(e,t,a)=>{Promise.resolve().then(a.bind(a,9617)),Promise.resolve().then(a.t.bind(a,5786,23)),Promise.resolve().then(a.t.bind(a,527,23)),Promise.resolve().then(a.t.bind(a,2972,23))},6104:(e,t,a)=>{"use strict";let l;a.d(t,{IG:()=>d,db:()=>c,hJ:()=>u,j2:()=>n});var i=a(3915),r=a(6203),o=a(5317),s=a(858);let n=null,c=null,d=null,u=null;(l=(0,i.Dk)().length?(0,i.Dk)()[0]:(0,i.Wp)({apiKey:"AIzaSyCQf_QXzyZkyRxsbo91PJmdwjEn3lVfDTo",authDomain:"cosmicteams-bbf29.firebaseapp.com",projectId:"cosmicteams-bbf29",storageBucket:"cosmicteams-bbf29.appspot.com",messagingSenderId:"807144888137",appId:"1:807144888137:web:2621a3ac917d9675d6ec98"}))&&(n=(0,r.xI)(l),c=(0,o.aU)(l),d=(0,s.c7)(l),u=new r.HF)},6493:(e,t,a)=>{"use strict";a.d(t,{H:()=>m,x:()=>u});var l=a(5155),i=a(2115),r=a(5317),o=a(6203),s=a(858),n=a(6104),c=a(5928);let d=(0,i.createContext)(null);function u(){let e=(0,i.useContext)(d);if(!e)throw Error("useProfile must be used within a ProfileProvider");return e}function m(e){let{children:t}=e,{user:a}=(0,c.A)(),[u,m]=(0,i.useState)(null),[p,h]=(0,i.useState)(!0),[f,w]=(0,i.useState)(!1),[y,b]=(0,i.useState)(null);(0,i.useEffect)(()=>{!async function(){if(!a){m(null),h(!1);return}h(!0);try{let e={displayName:a.displayName||"",photoURL:a.photoURL||"",email:a.email||"",username:a.email?a.email.split("@")[0]:"",profileMusic:null,musicType:null,gameTiers:{"neth-op":"LT1",axe:"LT1",smp:"LT1",cpvp:"LT1",sword:"LT1",uhc:"LT1"},canCreateTeams:!0,lastUpdated:Date.now(),createdAt:Date.now(),cosmicTokens:100,spinnerUsed:0,lastSpinTime:0};if(a.uid&&n.db){let t=(0,r.H9)(n.db,"userProfiles",a.uid),l=await (0,r.x7)(t);l.exists()?m({...e,...l.data()}):(await (0,r.BN)(t,{...e,createdAt:Date.now(),lastUpdated:Date.now()}),m(e))}else m(e)}catch(e){b("Failed to load profile data"),a&&m({displayName:a.displayName||"",photoURL:a.photoURL||"",email:a.email||"",username:a.email?a.email.split("@")[0]:"",profileMusic:null,musicType:null})}finally{h(!1)}}()},[a,n.db]);let g=async e=>{if(a){w(!0),b(null);try{if(e.displayName||e.photoURL){let t={};e.displayName&&(t.displayName=e.displayName),e.photoURL&&(t.photoURL=e.photoURL),await (0,o.r7)(a,t)}if(void 0!==e.cosmicTokens){if(e.cosmicTokens<0)throw Error("Token amount cannot be negative");e.cosmicTokens=Number(e.cosmicTokens)}if(a.uid&&n.db){let t=(0,r.H9)(n.db,"userProfiles",a.uid),l={...e,lastUpdated:Date.now()};await (0,r.mZ)(t,l);let i=(await (0,r.x7)(t)).data();m(e=>e?{...e,...i}:null)}else m(t=>t?{...t,...e}:null)}catch(e){throw b("Failed to update profile"),e}finally{w(!1)}}},v=async e=>{if(!a)throw Error("User not authenticated");w(!0),b(null);try{if(e.size>2097152)throw Error("Image file is too large. Please select a file under 2MB.");if(!e.type.startsWith("image/"))throw Error("Please select a valid image file (JPG, PNG, etc.)");let t=(0,s.KR)(n.IG,"profile-images/".concat(a.uid,"/").concat(Date.now(),"-").concat(e.name));if((null==u?void 0:u.photoURL)&&u.photoURL.includes("firebasestorage.googleapis.com"))try{let e=(0,s.KR)(n.IG,u.photoURL);await (0,s.XR)(e)}catch(e){}await (0,s.D)(t,e);let l=await (0,s.qk)(t);return await g({photoURL:l}),l}catch(e){throw b(e instanceof Error?e.message:"Failed to upload profile image"),e}finally{w(!1)}},k=async e=>{if(a){w(!0),b(null);try{a.uid&&await g({gameTiers:e})}catch(e){throw b("Failed to update game tiers"),e}finally{w(!1)}}},L=async(e,t)=>{if(!a||!a.email)throw Error("User not authenticated or email not available");w(!0),b(null);try{let l=o.IX.credential(a.email,e);await (0,o.kZ)(a,l),await (0,o.f3)(a,t)}catch(e){throw"auth/wrong-password"===e.code?b("Current password is incorrect"):b("Failed to change password"),e}finally{w(!1)}},U=async(e,t)=>{if(!a||!a.email)throw Error("User not authenticated or email not available");w(!0),b(null);try{let l=o.IX.credential(a.email,e);await (0,o.kZ)(a,l),await (0,o.Ww)(a,t),await g({email:t})}catch(e){throw"auth/wrong-password"===e.code?b("Current password is incorrect"):"auth/email-already-in-use"===e.code?b("This email is already in use by another account"):b("Failed to change email"),e}finally{w(!1)}};return(0,l.jsx)(d.Provider,{value:{profile:u,loading:p,updating:f,error:y,updateProfileData:g,uploadProfileImage:v,changePassword:L,changeEmail:U,updateAllGameTiers:k},children:t})}},9617:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var l=a(5155),i=a(2115),r=a(5928),o=a(6493),s=a(4247);function n(e){let{children:t}=e;return(0,i.useEffect)(()=>{(0,s.Tp)(),(0,s.tu)()},[]),(0,l.jsx)(r.O,{children:(0,l.jsx)(o.H,{children:t})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[630,611,794,288,441,684,358],()=>t(6078)),_N_E=e.O()}]);
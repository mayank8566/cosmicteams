(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[761],{255:(e,t,s)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),s(5155),s(7650),s(5744),s(589)},1584:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5155);let r=(0,s(5028).default)(()=>Promise.all([s.e(766),s.e(874),s.e(615)]).then(s.bind(s,4615)),{loadableGenerated:{webpack:()=>[4615]},ssr:!1});function n(){return(0,a.jsx)(r,{})}},2114:(e,t,s)=>{Promise.resolve().then(s.bind(s,2919))},2146:(e,t,s)=>{"use strict";function a(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),s(5262)},2813:(e,t,s)=>{"use strict";s.d(t,{O:()=>a,u:()=>r});let a=()=>new Date().getTime().toString(),r=e=>new Promise(t=>setTimeout(t,e))},2919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(5155),r=s(2115),n=s(5928),l=s(5317),i=s(6104),c=s(2813),o=s(6766),d=s(6874),u=s.n(d),m=s(4907),p=s(1584);function f(){let{user:e}=(0,n.A)(),[t,s]=(0,r.useState)([]),[d,f]=(0,r.useState)(!0),[h,x]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[g,y]=(0,r.useState)(!0),[w,v]=(0,r.useState)(!1),N=async e=>await Promise.all(e.map(async e=>{let t=await (0,m.q7)(e.createdBy);return{...e,createdByUsername:t||e.createdBy.split("@")[0]}})),P=async e=>{(0,c.O)(),await (0,c.u)(500);try{let t;t=e?(0,l.P)((0,l.rJ)(i.db,"teams"),(0,l.My)("points","desc"),(0,l.HM)(e),(0,l.AB)(10)):(0,l.P)((0,l.rJ)(i.db,"teams"),(0,l.My)("points","desc"),(0,l.AB)(10));let a=await (0,l.GG)(t);if(a.empty){y(!1),e||s([]);return}let r=a.docs[a.docs.length-1];j(r);let n=[];a.forEach(e=>{let t=e.data();n.push({id:e.id,name:t.name||"Unnamed Team",description:t.description||"",members:t.members||[],createdBy:t.createdBy||"",points:t.points||0,logo:t.logo||"/default-team-logo.png",createdAt:t.createdAt})});let c=await N(n);e?s(e=>[...e,...c]):s(c)}catch(t){if(x("Failed to fetch teams. Please try again."),!e)try{let e=(0,l.P)((0,l.rJ)(i.db,"teams"),(0,l.AB)(20)),t=await (0,l.GG)(e),a=[];t.forEach(e=>{let t=e.data();a.push({id:e.id,name:t.name||"Unnamed Team",description:t.description||"",members:t.members||[],createdBy:t.createdBy||"",points:t.points||0,logo:t.logo||"/default-team-logo.png",createdAt:t.createdAt})});let r=[...a].sort((e,t)=>t.points-e.points),n=await N(r.slice(0,10));s(n),y(r.length>10),j(null)}catch(e){s([])}}},k=async()=>{g&&!w&&(v(!0),await P(b),v(!1))},_=async()=>{f(!0),x(null),j(null),y(!0),setTimeout(()=>{P().catch(e=>{f(!1),x("Failed to fetch teams. Please try again."),s([])}).finally(()=>{f(!1)})},0)};return(0,r.useEffect)(()=>{_()},[e]),(0,a.jsxs)("main",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)(p.A,{}),(0,a.jsxs)("div",{className:"flex-1 py-16 px-6 relative",children:[(0,a.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-b from-space-dark to-space-darker overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute w-96 h-96 rounded-full bg-space-purple/10 blur-3xl -top-48 -left-48 animate-pulse-slow"}),(0,a.jsx)("div",{className:"absolute w-80 h-80 rounded-full bg-space-indigo/10 blur-3xl bottom-0 right-0 animate-pulse-slow delay-1000"}),(0,a.jsx)("div",{className:"absolute w-64 h-64 rounded-full bg-space-cyan/5 blur-3xl top-1/3 left-1/3 animate-pulse-slow delay-2000"})]}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold font-space",children:(0,a.jsx)("span",{className:"gradient-text cosmic-gradient",children:"Blitz Teams"})}),(0,a.jsx)("p",{className:"text-cosmic-text-secondary mt-2",children:"All teams ranked by cosmic points"})]}),(0,a.jsx)(u(),{href:"/",className:"btn-gradient-secondary btn-press py-2 px-4",children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})}),"Back"]})})]}),d?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"inline-block h-12 w-12 animate-spin rounded-full border-4 border-space-cyan border-t-transparent"})}):h?(0,a.jsxs)("div",{className:"cosmic-card border border-cosmic-error/30 p-6 max-w-lg mx-auto text-center",children:[(0,a.jsx)("p",{className:"text-cosmic-error mb-4",children:h}),(0,a.jsx)("button",{onClick:_,className:"btn-gradient-secondary btn-press inline-block",children:(0,a.jsx)("span",{children:"Retry"})})]}):t.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"cosmic-card cosmic-card-hover border border-space-purple/30 overflow-hidden relative transform transition-all duration-300",children:[(0,a.jsx)("div",{className:"absolute -top-6 -left-6",children:(0,a.jsx)("div",{className:"w-16 h-16 flex items-center justify-center bg-gradient-to-br from-space-indigo to-space-purple rotate-12 shadow-lg cosmic-shadow-md",children:(0,a.jsxs)("span",{className:"text-lg font-bold text-white -rotate-12",children:["#",t+1]})})}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row p-6 gap-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-gradient-to-br from-space-indigo via-space-purple to-space-pink p-0.5 cosmic-shadow-sm",children:(0,a.jsx)("div",{className:"w-full h-full bg-space-dark rounded-lg overflow-hidden",children:(0,a.jsx)(o.default,{src:e.logo||"/default-team-logo.png",alt:e.name,width:80,height:80,className:"w-full h-full object-cover"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-2 gap-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold font-space",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-cosmic-text-tertiary text-sm",children:"Points:"}),(0,a.jsx)("span",{className:"text-xl font-bold text-space-gold cosmic-glow-cyan",children:e.points})]})]}),(0,a.jsx)("p",{className:"text-cosmic-text-secondary mb-4 line-clamp-2",children:e.description||"No description provided."}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-space-cyan mr-2 text-sm",children:"Created by:"}),(0,a.jsx)("span",{className:"text-cosmic-text-secondary",children:e.createdByUsername||e.createdBy.split("@")[0]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-space-cyan text-sm",children:"Team Size:"}),(0,a.jsxs)("span",{className:"text-cosmic-text-secondary",children:[e.members.length," members"]})]}),(0,a.jsx)(u(),{href:"/teams/".concat(e.id),className:"btn-gradient-secondary btn-press btn-shine py-1 px-4 text-sm group",children:(0,a.jsx)("span",{className:"group-hover:animate-pulse-light",children:"View Team"})})]})]})]})]},e.id))}),g&&(0,a.jsx)("div",{className:"mt-12 text-center",children:(0,a.jsx)("button",{onClick:k,disabled:w,className:"btn-gradient btn-press btn-shine py-2 px-6 inline-block",children:w?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Loading more..."]}):(0,a.jsx)("span",{children:"Load More Teams"})})})]}):(0,a.jsxs)("div",{className:"cosmic-card border border-dashed border-space-purple/30 p-8 max-w-lg mx-auto text-center",children:[(0,a.jsx)("p",{className:"text-cosmic-text-secondary mb-4",children:"No teams found. Be the first to create a team!"}),(0,a.jsx)(u(),{href:"/create-team",className:"btn-gradient btn-press btn-shine inline-block",children:(0,a.jsx)("span",{children:"Create Team"})})]})]})]})]})}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{bindSnapshot:function(){return l},createAsyncLocalStorage:function(){return n},createSnapshot:function(){return i}});let s=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw s}getStore(){}run(){throw s}exit(){throw s}enterWith(){throw s}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function n(){return r?new r:new a}function l(e){return r?r.bind(e):a.bind(e)}function i(){return r?r.snapshot():function(e,...t){return e(...t)}}},4907:(e,t,s)=>{"use strict";s.d(t,{q7:()=>n});var a=s(6104),r=s(5317);async function n(e){try{let t=(0,r.P)((0,r.rJ)(a.db,"users"),(0,r._M)("email","==",e)),s=await (0,r.GG)(t);if(!s.empty)return s.docs[0].data().displayName||e.split("@")[0];return e.split("@")[0]}catch(t){return e.split("@")[0]}}},5028:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(6645),r=s.n(a)},5744:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=s(7828)},5928:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,O:()=>d});var a=s(5155),r=s(2115),n=s(6203),l=s(6104),i=s(5317);let c=(0,r.createContext)(null);function o(){let e=(0,r.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){let{children:t}=e,[s,o]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,n.hg)(l.j2,e=>{o(e),u(!1)});return(0,n.Q4)(l.j2).then(e=>{(null==e?void 0:e.user)&&o(e.user)}).catch(e=>{}),e},[]);let m=async(e,t,s)=>{let a=await (0,n.eJ)(l.j2,e,t),r=a.user;return s&&r&&(await (0,n.r7)(r,{displayName:s}),await (0,i.BN)((0,i.H9)(l.db,"userProfiles",r.uid),{email:r.email,username:s,displayName:s,createdAt:(0,i.O5)(),hasSetUsername:!0})),a},p=async()=>{try{l.hJ.setCustomParameters({prompt:"select_account"});let t=await (0,n.df)(l.j2,l.hJ,n.hk),s=t.user;if(s){var e;await (0,i.BN)((0,i.H9)(l.db,"userProfiles",s.uid),{email:s.email,displayName:s.displayName||(null===(e=s.email)||void 0===e?void 0:e.split("@")[0])||"User",photoURL:s.photoURL,createdAt:(0,i.O5)(),lastLogin:(0,i.O5)(),hasSetUsername:!1},{merge:!0})}return t}catch(e){if("auth/popup-blocked"===e.code||"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code){await (0,n.$2)(l.j2,l.hJ);return}throw e}};return(0,a.jsx)(c.Provider,{value:{user:s,loading:d,signUp:m,signIn:(e,t)=>(0,n.x9)(l.j2,e,t),signInWithGoogle:p,logout:()=>(0,n.CI)(l.j2)},children:t})}},6104:(e,t,s)=>{"use strict";let a;s.d(t,{IG:()=>d,db:()=>o,hJ:()=>u,j2:()=>c});var r=s(3915),n=s(6203),l=s(5317),i=s(858);let c=null,o=null,d=null,u=null;(a=(0,r.Dk)().length?(0,r.Dk)()[0]:(0,r.Wp)({apiKey:"AIzaSyCQf_QXzyZkyRxsbo91PJmdwjEn3lVfDTo",authDomain:"cosmicteams-bbf29.firebaseapp.com",projectId:"cosmicteams-bbf29",storageBucket:"cosmicteams-bbf29.appspot.com",messagingSenderId:"807144888137",appId:"1:807144888137:web:2621a3ac917d9675d6ec98"}))&&(c=(0,n.xI)(a),o=(0,l.aU)(a),d=(0,i.c7)(a),u=new n.HF)},6645:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let a=s(8229)._(s(7357));function r(e,t){var s;let r={};"function"==typeof e&&(r.loader=e);let n={...r,...t};return(0,a.default)({...n,modules:null==(s=n.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let a=s(5155),r=s(2115),n=s(2146);function l(e){return{default:e&&"default"in e?e.default:e}}s(255);let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},c=function(e){let t={...i,...e},s=(0,r.lazy)(()=>t.loader().then(l)),c=t.loading;function o(e){let l=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,o=i?r.Suspense:r.Fragment,d=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(o,{...i?{fallback:l}:{},children:d})}return o.displayName="LoadableComponent",o}},7828:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,s(4054).createAsyncLocalStorage)()}},e=>{var t=t=>e(e.s=t);e.O(0,[611,794,288,766,874,441,684,358],()=>t(2114)),_N_E=e.O()}]);
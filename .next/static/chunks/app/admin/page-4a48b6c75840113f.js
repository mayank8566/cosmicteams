(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},5928:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,O:()=>u});var r=a(5155),l=a(2115),s=a(6203),o=a(6104),i=a(5317);let n=(0,l.createContext)(null);function d(){let e=(0,l.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function u(e){let{children:t}=e,[a,d]=(0,l.useState)(null),[u,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=(0,s.hg)(o.j2,e=>{d(e),c(!1)});return(0,s.Q4)(o.j2).then(e=>{(null==e?void 0:e.user)&&d(e.user)}).catch(e=>{}),e},[]);let m=async(e,t,a)=>{let r=await (0,s.eJ)(o.j2,e,t),l=r.user;return a&&l&&(await (0,s.r7)(l,{displayName:a}),await (0,i.BN)((0,i.H9)(o.db,"userProfiles",l.uid),{email:l.email,username:a,displayName:a,createdAt:(0,i.O5)(),hasSetUsername:!0})),r},p=async()=>{try{o.hJ.setCustomParameters({prompt:"select_account"});let t=await (0,s.df)(o.j2,o.hJ,s.hk),a=t.user;if(a){var e;await (0,i.BN)((0,i.H9)(o.db,"userProfiles",a.uid),{email:a.email,displayName:a.displayName||(null===(e=a.email)||void 0===e?void 0:e.split("@")[0])||"User",photoURL:a.photoURL,createdAt:(0,i.O5)(),lastLogin:(0,i.O5)(),hasSetUsername:!1},{merge:!0})}return t}catch(e){if("auth/popup-blocked"===e.code||"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code){await (0,s.$2)(o.j2,o.hJ);return}throw e}};return(0,r.jsx)(n.Provider,{value:{user:a,loading:u,signUp:m,signIn:(e,t)=>(0,s.x9)(o.j2,e,t),signInWithGoogle:p,logout:()=>(0,s.CI)(o.j2)},children:t})}},6104:(e,t,a)=>{"use strict";let r;a.d(t,{IG:()=>u,db:()=>d,hJ:()=>c,j2:()=>n});var l=a(3915),s=a(6203),o=a(5317),i=a(858);let n=null,d=null,u=null,c=null;(r=(0,l.Dk)().length?(0,l.Dk)()[0]:(0,l.Wp)({apiKey:"AIzaSyCQf_QXzyZkyRxsbo91PJmdwjEn3lVfDTo",authDomain:"cosmicteams-bbf29.firebaseapp.com",projectId:"cosmicteams-bbf29",storageBucket:"cosmicteams-bbf29.appspot.com",messagingSenderId:"807144888137",appId:"1:807144888137:web:2621a3ac917d9675d6ec98"}))&&(n=(0,s.xI)(r),d=(0,o.aU)(r),u=(0,i.c7)(r),c=new s.HF)},6493:(e,t,a)=>{"use strict";a.d(t,{H:()=>m,x:()=>c});var r=a(5155),l=a(2115),s=a(5317),o=a(6203),i=a(858),n=a(6104),d=a(5928);let u=(0,l.createContext)(null);function c(){let e=(0,l.useContext)(u);if(!e)throw Error("useProfile must be used within a ProfileProvider");return e}function m(e){let{children:t}=e,{user:a}=(0,d.A)(),[c,m]=(0,l.useState)(null),[p,h]=(0,l.useState)(!0),[b,g]=(0,l.useState)(!1),[f,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{!async function(){if(!a){m(null),h(!1);return}h(!0);try{let e={displayName:a.displayName||"",photoURL:a.photoURL||"",email:a.email||"",username:a.email?a.email.split("@")[0]:"",profileMusic:null,musicType:null,gameTiers:{"neth-op":"LT1",axe:"LT1",smp:"LT1",cpvp:"LT1",sword:"LT1",uhc:"LT1"},canCreateTeams:!0,lastUpdated:Date.now(),createdAt:Date.now(),cosmicTokens:100,spinnerUsed:0,lastSpinTime:0};if(a.uid&&n.db){let t=(0,s.H9)(n.db,"userProfiles",a.uid),r=await (0,s.x7)(t);r.exists()?m({...e,...r.data()}):(await (0,s.BN)(t,{...e,createdAt:Date.now(),lastUpdated:Date.now()}),m(e))}else m(e)}catch(e){x("Failed to load profile data"),a&&m({displayName:a.displayName||"",photoURL:a.photoURL||"",email:a.email||"",username:a.email?a.email.split("@")[0]:"",profileMusic:null,musicType:null})}finally{h(!1)}}()},[a,n.db]);let y=async e=>{if(a){g(!0),x(null);try{if(e.displayName||e.photoURL){let t={};e.displayName&&(t.displayName=e.displayName),e.photoURL&&(t.photoURL=e.photoURL),await (0,o.r7)(a,t)}if(void 0!==e.cosmicTokens){if(e.cosmicTokens<0)throw Error("Token amount cannot be negative");e.cosmicTokens=Number(e.cosmicTokens)}if(a.uid&&n.db){let t=(0,s.H9)(n.db,"userProfiles",a.uid),r={...e,lastUpdated:Date.now()};await (0,s.mZ)(t,r);let l=(await (0,s.x7)(t)).data();m(e=>e?{...e,...l}:null)}else m(t=>t?{...t,...e}:null)}catch(e){throw x("Failed to update profile"),e}finally{g(!1)}}},w=async e=>{if(!a)throw Error("User not authenticated");g(!0),x(null);try{if(e.size>2097152)throw Error("Image file is too large. Please select a file under 2MB.");if(!e.type.startsWith("image/"))throw Error("Please select a valid image file (JPG, PNG, etc.)");let t=(0,i.KR)(n.IG,"profile-images/".concat(a.uid,"/").concat(Date.now(),"-").concat(e.name));if((null==c?void 0:c.photoURL)&&c.photoURL.includes("firebasestorage.googleapis.com"))try{let e=(0,i.KR)(n.IG,c.photoURL);await (0,i.XR)(e)}catch(e){}await (0,i.D)(t,e);let r=await (0,i.qk)(t);return await y({photoURL:r}),r}catch(e){throw x(e instanceof Error?e.message:"Failed to upload profile image"),e}finally{g(!1)}},v=async e=>{if(a){g(!0),x(null);try{a.uid&&await y({gameTiers:e})}catch(e){throw x("Failed to update game tiers"),e}finally{g(!1)}}},N=async(e,t)=>{if(!a||!a.email)throw Error("User not authenticated or email not available");g(!0),x(null);try{let r=o.IX.credential(a.email,e);await (0,o.kZ)(a,r),await (0,o.f3)(a,t)}catch(e){throw"auth/wrong-password"===e.code?x("Current password is incorrect"):x("Failed to change password"),e}finally{g(!1)}},j=async(e,t)=>{if(!a||!a.email)throw Error("User not authenticated or email not available");g(!0),x(null);try{let r=o.IX.credential(a.email,e);await (0,o.kZ)(a,r),await (0,o.Ww)(a,t),await y({email:t})}catch(e){throw"auth/wrong-password"===e.code?x("Current password is incorrect"):"auth/email-already-in-use"===e.code?x("This email is already in use by another account"):x("Failed to change email"),e}finally{g(!1)}};return(0,r.jsx)(u.Provider,{value:{profile:c,loading:p,updating:b,error:f,updateProfileData:y,uploadProfileImage:w,changePassword:N,changeEmail:j,updateAllGameTiers:v},children:t})}},7220:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),l=a(2115),s=a(5695),o=a(5928),i=a(6493),n=a(7015),d=a(6104);let u={email:"admin@cosmicteams.com",password:"admin123"};function c(){let e=(0,s.useRouter)(),{user:t}=(0,o.A)(),{profile:a}=(0,i.x)(),[c,m]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),[b,g]=(0,l.useState)(!1),[f,x]=(0,l.useState)(null),[y,w]=(0,l.useState)(""),[v,N]=(0,l.useState)(!1),[j,k]=(0,l.useState)(""),[P,U]=(0,l.useState)(100),[S,T]=(0,l.useState)(!1),[L,C]=(0,l.useState)(null),[R,E]=(0,l.useState)(null);(0,l.useEffect)(()=>{"true"===sessionStorage.getItem("adminAuth")&&g(!0)},[]);let A=async e=>{if(e.preventDefault(),!y){x("Please enter a user email");return}N(!0),x(null);try{let e=(0,n.H9)(d.db,"userProfiles",y);await (0,n.mZ)(e,{canCreateTeams:!0,lastUpdated:Date.now()}),w(""),alert("Access granted successfully!")}catch(e){x("Failed to grant access. Please check the email and try again.")}finally{N(!1)}},D=async e=>{if(e.preventDefault(),!j){C("Please enter a user email");return}if(P<=0){C("Token amount must be greater than 0");return}T(!0),C(null);try{let e=(0,n.rJ)(d.db,"userProfiles"),t=(0,n.P)(e,(0,n._M)("email","==",j)),a=await (0,n.GG)(t);if(a.empty)throw Error("User not found with the provided email");let r=a.docs[0].id,l=(0,n.H9)(d.db,"userProfiles",r);await (0,n.mZ)(l,{cosmicTokens:(0,n.GV)(P),lastUpdated:Date.now()}),await (0,n.mZ)(l,{spinHistory:(0,n.hq)({time:Date.now(),prize:{type:"tokens",amount:P},type:"admin-grant"})}),E("Successfully granted ".concat(P," tokens to ").concat(j,"!")),setTimeout(()=>E(null),5e3),k(""),U(100)}catch(e){e instanceof Error?C("Failed to grant tokens: ".concat(e.message)):C("Failed to grant tokens. Please check the email and try again.")}finally{T(!1)}};return b?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 bg-gradient-to-b from-slate-900 to-slate-800 min-h-screen",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8 p-6 bg-slate-800/80 rounded-lg shadow-xl",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Admin Dashboard"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>{sessionStorage.removeItem("adminAuth"),g(!1)},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Logout"}),(0,r.jsx)("button",{onClick:()=>e.push("/"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Home"})]})]}),(0,r.jsxs)("div",{className:"bg-white/5 p-8 rounded-lg backdrop-blur-sm shadow-xl",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-400",children:"Grant Team Creation Access"}),(0,r.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"User Email"}),(0,r.jsx)("input",{type:"email",value:y,onChange:e=>w(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-700 bg-gray-800/50 focus:ring-2 focus:ring-blue-500 outline-none text-white",placeholder:"user@example.com",required:!0})]}),f&&(0,r.jsx)("div",{className:"p-4 bg-red-900/50 text-red-200 rounded-lg border border-red-700",children:f}),(0,r.jsx)("button",{type:"submit",disabled:v,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:transform-none",children:v?"Processing...":"Grant Access"})]})]}),(0,r.jsxs)("div",{className:"bg-white/5 p-8 rounded-lg backdrop-blur-sm shadow-xl mt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-400",children:"Grant Cosmic Tokens"}),(0,r.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"User Email"}),(0,r.jsx)("input",{type:"email",value:j,onChange:e=>k(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-700 bg-gray-800/50 focus:ring-2 focus:ring-blue-500 outline-none text-white",placeholder:"user@example.com",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Token Amount"}),(0,r.jsx)("input",{type:"number",value:P,onChange:e=>U(parseInt(e.target.value)),className:"w-full px-4 py-3 rounded-lg border border-gray-700 bg-gray-800/50 focus:ring-2 focus:ring-blue-500 outline-none text-white",required:!0})]}),L&&(0,r.jsx)("div",{className:"p-4 bg-red-900/50 text-red-200 rounded-lg border border-red-700",children:L}),R&&(0,r.jsx)("div",{className:"p-4 bg-green-900/50 text-green-200 rounded-lg border border-green-700",children:R}),(0,r.jsx)("button",{type:"submit",disabled:S,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:transform-none",children:S?"Processing...":"Grant Tokens"})]})]})]})}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 bg-gradient-to-b from-slate-900 to-slate-800 min-h-screen",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 text-center",children:"Admin Login"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c===u.email&&p===u.password?(g(!0),sessionStorage.setItem("adminAuth","true"),x(null)):x("Invalid credentials. Please try again.")},className:"space-y-6 bg-white/5 p-8 rounded-lg backdrop-blur-sm shadow-xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",value:c,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-700 bg-gray-800/50 focus:ring-2 focus:ring-blue-500 outline-none text-white",required:!0,placeholder:"admin@cosmicteams.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",value:p,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-700 bg-gray-800/50 focus:ring-2 focus:ring-blue-500 outline-none text-white",required:!0,placeholder:"••••••••"})]}),f&&(0,r.jsx)("div",{className:"p-4 bg-red-900/50 text-red-200 rounded-lg border border-red-700",children:f}),(0,r.jsx)("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-lg transition-all transform hover:scale-105",children:"Login"})]}),(0,r.jsx)("div",{className:"mt-6 text-center text-gray-400 text-sm",children:(0,r.jsx)("p",{children:"Use the credentials provided by your administrator"})})]})})}},7697:(e,t,a)=>{Promise.resolve().then(a.bind(a,7220))}},e=>{var t=t=>e(e.s=t);e.O(0,[611,794,288,441,684,358],()=>t(7697)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},5928:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,O:()=>o});var s=a(5155),r=a(2115),u=a(6203),n=a(6104),i=a(5317);let l=(0,r.createContext)(null);function c(){let e=(0,r.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function o(e){let{children:t}=e,[a,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,u.hg)(n.j2,e=>{c(e),d(!1)});return(0,u.Q4)(n.j2).then(e=>{(null==e?void 0:e.user)&&c(e.user)}).catch(e=>{}),e},[]);let m=async(e,t,a)=>{let s=await (0,u.eJ)(n.j2,e,t),r=s.user;return a&&r&&(await (0,u.r7)(r,{displayName:a}),await (0,i.BN)((0,i.H9)(n.db,"userProfiles",r.uid),{email:r.email,username:a,displayName:a,createdAt:(0,i.O5)(),hasSetUsername:!0})),s},h=async()=>{try{n.hJ.setCustomParameters({prompt:"select_account"});let t=await (0,u.df)(n.j2,n.hJ,u.hk),a=t.user;if(a){var e;await (0,i.BN)((0,i.H9)(n.db,"userProfiles",a.uid),{email:a.email,displayName:a.displayName||(null===(e=a.email)||void 0===e?void 0:e.split("@")[0])||"User",photoURL:a.photoURL,createdAt:(0,i.O5)(),lastLogin:(0,i.O5)(),hasSetUsername:!1},{merge:!0})}return t}catch(e){if("auth/popup-blocked"===e.code||"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code){await (0,u.$2)(n.j2,n.hJ);return}throw e}};return(0,s.jsx)(l.Provider,{value:{user:a,loading:o,signUp:m,signIn:(e,t)=>(0,u.x9)(n.j2,e,t),signInWithGoogle:h,logout:()=>(0,u.CI)(n.j2)},children:t})}},6104:(e,t,a)=>{"use strict";let s;a.d(t,{IG:()=>o,db:()=>c,hJ:()=>d,j2:()=>l});var r=a(3915),u=a(6203),n=a(5317),i=a(858);let l=null,c=null,o=null,d=null;(s=(0,r.Dk)().length?(0,r.Dk)()[0]:(0,r.Wp)({apiKey:"AIzaSyCQf_QXzyZkyRxsbo91PJmdwjEn3lVfDTo",authDomain:"cosmicteams-bbf29.firebaseapp.com",projectId:"cosmicteams-bbf29",storageBucket:"cosmicteams-bbf29.appspot.com",messagingSenderId:"807144888137",appId:"1:807144888137:web:2621a3ac917d9675d6ec98"}))&&(l=(0,u.xI)(s),c=(0,n.aU)(s),o=(0,i.c7)(s),d=new u.HF)},6344:(e,t,a)=>{Promise.resolve().then(a.bind(a,9332))},9332:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),r=a(2115),u=a(5695),n=a(7015),i=a(6104),l=a(5928);function c(e){let{children:t,fallbackUrl:a="/dashboard"}=e,c=(0,u.useRouter)(),{user:o,loading:d}=(0,l.A)(),[m,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{if(!d){if(!o){c.push("/login");return}(async()=>{try{if("alok905621@gmail.com"===o.email){h(!0),f(!1);return}let e=sessionStorage.getItem("adminAuth");if("true"===e){h(!0),f(!1);return}let t=await (0,n.x7)((0,n.H9)(i.db,"userProfiles",o.email||""));if(t.exists()){let e=t.data();"admin"===e.role?h(!0):(h(!1),c.push(a))}else h(!1),c.push(a)}catch(e){h(!1),c.push(a)}finally{f(!1)}})()}},[o,d,c,a]),d||p)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-space-dark",children:(0,s.jsxs)("div",{className:"cosmic-card p-8",children:[(0,s.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-space-cyan border-t-transparent rounded-full mx-auto"}),(0,s.jsx)("p",{className:"text-center mt-4",children:"Verifying admin access..."})]})}):m?(0,s.jsx)(s.Fragment,{children:t}):null}function o(e){let{children:t}=e;return(0,s.jsx)(c,{children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[611,794,288,441,684,358],()=>t(6344)),_N_E=e.O()}]);
(()=>{var e={};e.id=992,e.ids=[992],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1200:(e,t,s)=>{Promise.resolve().then(s.bind(s,99111))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},6736:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Mayank\\\\Desktop\\\\cosmicteams\\\\src\\\\app\\\\admin\\\\token-management\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Mayank\\Desktop\\cosmicteams\\src\\app\\admin\\token-management\\page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10928:(e,t,s)=>{Promise.resolve().then(s.bind(s,58364))},16141:e=>{"use strict";e.exports=require("node:zlib")},16189:(e,t,s)=>{"use strict";var r=s(65773);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19587:(e,t)=>{"use strict";function s(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return s}})},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},24395:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(60687),a=s(43210),n=s(16189),o=s(19139),l=s(33784),i=s(52936),d=s(94750),c=s(30474);let u=({src:e,alt:t,width:s=100,height:n=100,className:o="",priority:l=!1,loadingStrategy:i="lazy",objectFit:d="cover"})=>{let[u,m]=(0,a.useState)(!0),[p,x]=(0,a.useState)(!1),f=`
    <svg width="${s}" height="${n}" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <rect width="${s}" height="${n}" fill="#1e293b" />
      <rect id="r" width="${s}" height="${n}" fill="url(#g)" />
      <defs>
        <linearGradient id="g">
          <stop stop-color="#1e293b" offset="0%" />
          <stop stop-color="#334155" offset="50%" />
          <stop stop-color="#1e293b" offset="100%" />
        </linearGradient>
      </defs>
    </svg>`,h=`data:image/svg+xml;base64,${Buffer.from(f).toString("base64")}`;return(0,r.jsxs)("div",{className:`relative overflow-hidden ${o}`,style:{width:s,height:n},children:[u&&(0,r.jsx)("div",{className:"absolute inset-0 bg-slate-800 animate-pulse"}),p?(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-800 text-slate-300 text-sm",children:(0,r.jsx)("span",{children:"Failed to load image"})}):(0,r.jsx)(c.default,{src:e,alt:t,width:s,height:n,onLoad:()=>{m(!1)},onError:()=>{m(!1),x(!0)},priority:l,loading:i,placeholder:"blur",blurDataURL:h,style:{objectFit:d,opacity:+!u,transition:"opacity 0.2s ease-in-out"},className:"w-full h-full"})]})};function m(){(0,n.useRouter)();let{user:e}=(0,i.A)(),[t,s]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!0),[p,x]=(0,a.useState)(""),[f,h]=(0,a.useState)([]),[b,y]=(0,a.useState)(null),[g,j]=(0,a.useState)(""),[v,N]=(0,a.useState)("add"),[k,w]=(0,a.useState)(null),[_,P]=(0,a.useState)([]),q=async()=>{if(p.trim()){m(!0),h([]),y(null);try{let e=(0,o.rJ)(l.db,"users"),t=[];if(p.includes("@")){let e=await (0,o.x7)((0,o.H9)(l.db,"users",p));if(e.exists()){let s=e.data();t.push({uid:e.id,email:e.id,displayName:s.displayName||"Unknown",username:s.username,photoURL:s.photoURL,cosmicTokens:s.cosmicTokens||0})}}else(await (0,o.GG)(e)).forEach(e=>{let s=e.data();s.username&&s.username.toLowerCase().includes(p.toLowerCase())&&t.push({uid:e.id,email:e.id,displayName:s.displayName||"Unknown",username:s.username,photoURL:s.photoURL,cosmicTokens:s.cosmicTokens||0})});h(t)}catch(e){w({text:"Error searching for users. Please try again.",type:"error"})}finally{m(!1)}}},C=e=>{y(e),j(""),w(null)},R=async()=>{if(!b||!g||isNaN(Number(g))){w({text:"Please enter a valid token amount",type:"error"});return}let t=Number(g);if(t<=0){w({text:"Token amount must be greater than 0",type:"error"});return}m(!0);try{let s;let r=(0,o.H9)(l.db,"users",b.email),a=await (0,o.x7)(r);if(!a.exists())throw Error("User not found");let n=a.data().cosmicTokens||0;if("add"===v)s=n+t;else{if(n<t){w({text:`User only has ${n} tokens. Cannot remove ${t} tokens.`,type:"error"}),m(!1);return}s=n-t}await (0,o.mZ)(r,{cosmicTokens:s,lastUpdated:Date.now()});let i=(0,o.rJ)(l.db,"tokenTransactions"),d={userId:b.email,username:b.username||b.displayName,adminId:e?.email,amount:t,type:v,timestamp:Date.now(),previousBalance:n,newBalance:s};await (0,o.mZ)((0,o.H9)(i),d),y({...b,cosmicTokens:s});let c={userId:b.email,username:b.username||b.displayName,amount:t,type:v,timestamp:Date.now()};P([c,..._.slice(0,9)]),w({text:`Successfully ${"add"===v?"added":"removed"} ${t} tokens ${"add"===v?"to":"from"} ${b.username||b.email}`,type:"success"}),j("")}catch(e){w({text:"Error processing token transaction. Please try again.",type:"error"})}finally{m(!1)}};return c&&!t?(0,r.jsxs)("main",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(d.A,{}),(0,r.jsx)("div",{className:"flex-1 py-16 px-6 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"cosmic-card p-8",children:[(0,r.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-space-cyan border-t-transparent rounded-full mx-auto"}),(0,r.jsx)("p",{className:"text-center mt-4",children:"Loading..."})]})})]}):(0,r.jsxs)("main",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(d.A,{}),(0,r.jsx)("div",{className:"flex-1 py-8 px-6 max-w-6xl mx-auto w-full",children:(0,r.jsxs)("div",{className:"cosmic-card p-6 mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Admin Token Management"}),(0,r.jsx)("p",{className:"mb-6 text-gray-300",children:"Grant or remove Cosmic Tokens from users by email or username"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[(0,r.jsx)("input",{type:"text",value:p,onChange:e=>x(e.target.value),onKeyDown:e=>"Enter"===e.key&&q(),placeholder:"Search by email or username",className:"flex-1 bg-space-darker border border-space-indigo rounded-md px-4 py-2 text-white"}),(0,r.jsx)("button",{onClick:q,disabled:c||!p.trim(),className:"btn-primary",children:c?"Searching...":"Search"})]}),f.length>0&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Search Results"}),(0,r.jsx)("div",{className:"space-y-4",children:f.map(e=>(0,r.jsx)("div",{className:`border p-4 rounded-md cursor-pointer transition-colors ${b?.email===e.email?"border-space-gold bg-space-gold/10":"border-space-indigo hover:border-space-cyan"}`,onClick:()=>C(e),children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[e.photoURL?(0,r.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:(0,r.jsx)(u,{src:e.photoURL,alt:e.displayName,width:48,height:48,className:"w-full h-full object-cover"})}):(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-space-indigo flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-xl font-bold text-white",children:(e.displayName?.[0]||e.email[0]).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold",children:e.displayName}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:e.username?`@${e.username}`:""}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:e.email})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("div",{className:"font-semibold",children:[e.cosmicTokens," Tokens"]})})]})},e.email))})]}),b&&(0,r.jsxs)("div",{className:"cosmic-card bg-space-darker p-6 mb-8",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Modify Tokens for ",b.username||b.email]}),(0,r.jsxs)("p",{className:"mb-4",children:["Current balance: ",(0,r.jsxs)("span",{className:"font-semibold",children:[b.cosmicTokens," Tokens"]})]}),k&&(0,r.jsx)("div",{className:`mb-4 p-3 rounded-md ${"success"===k.type?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:k.text}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",htmlFor:"token-amount",children:"Token Amount"}),(0,r.jsx)("input",{id:"token-amount",type:"number",min:"1",value:g,onChange:e=>j(e.target.value),placeholder:"Enter amount",className:"w-full bg-space-dark border border-space-indigo rounded-md px-4 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Transaction Type"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",value:"add",checked:"add"===v,onChange:()=>N("add"),className:"form-radio text-space-gold focus:ring-space-gold h-5 w-5"}),(0,r.jsx)("span",{children:"Add Tokens"})]}),(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",value:"remove",checked:"remove"===v,onChange:()=>N("remove"),className:"form-radio text-red-500 focus:ring-red-500 h-5 w-5"}),(0,r.jsx)("span",{children:"Remove Tokens"})]})]})]})]}),(0,r.jsx)("button",{onClick:R,disabled:c||!g||isNaN(Number(g))||0>=Number(g),className:`px-6 py-2 rounded-md font-medium ${"add"===v?"bg-space-gold text-black hover:bg-space-gold/90":"bg-red-600 text-white hover:bg-red-700"}`,children:c?"Processing...":"add"===v?"Add Tokens":"Remove Tokens"})]}),_.length>0&&(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Transactions"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-space-indigo",children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"User"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Action"}),(0,r.jsx)("th",{className:"px-4 py-2 text-right",children:"Amount"}),(0,r.jsx)("th",{className:"px-4 py-2 text-right",children:"Date"})]})}),(0,r.jsx)("tbody",{children:_.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-space-indigo/30",children:[(0,r.jsx)("td",{className:"px-4 py-3",children:e.username}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs ${"add"===e.type?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:"add"===e.type?"Added":"Removed"})}),(0,r.jsxs)("td",{className:"px-4 py-3 text-right",children:[e.amount," Tokens"]}),(0,r.jsx)("td",{className:"px-4 py-3 text-right",children:new Date(e.timestamp).toLocaleString()})]},t))})]})})]})]})})]})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30036:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(49587),a=s.n(r)},32467:e=>{"use strict";e.exports=require("node:http2")},33873:e=>{"use strict";e.exports=require("path")},34589:e=>{"use strict";e.exports=require("node:assert")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37540:e=>{"use strict";e.exports=require("node:console")},41204:e=>{"use strict";e.exports=require("string_decoder")},41516:(e,t,s)=>{Promise.resolve().then(s.bind(s,24395))},41692:e=>{"use strict";e.exports=require("node:tls")},41792:e=>{"use strict";e.exports=require("node:querystring")},42394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(65239),a=s(48088),n=s(88170),o=s.n(n),l=s(30893),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let d={children:["",{children:["admin",{children:["token-management",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6736)),"C:\\Users\\Mayank\\Desktop\\cosmicteams\\src\\app\\admin\\token-management\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,99111)),"C:\\Users\\Mayank\\Desktop\\cosmicteams\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"C:\\Users\\Mayank\\Desktop\\cosmicteams\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\Mayank\\Desktop\\cosmicteams\\src\\app\\admin\\token-management\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/token-management/page",pathname:"/admin/token-management",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},49587:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let r=s(14985)._(s(64963));function a(e,t){var s;let a={};"function"==typeof e&&(a.loader=e);let n={...a,...t};return(0,r.default)({...n,modules:null==(s=n.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53038:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let r=s(43210);function a(e,t){let s=(0,r.useRef)(null),a=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(s.current=n(e,r)),t&&(a.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},55511:e=>{"use strict";e.exports=require("crypto")},56780:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=s(81208);function a(e){let{reason:t,children:s}=e;throw Object.defineProperty(new r.BailoutToCSRError(t),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},58364:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(60687),a=s(43210),n=s(16189);s(1017),s(33784);var o=s(52936);function l({children:e,fallbackUrl:t="/dashboard"}){(0,n.useRouter)();let{user:s,loading:l}=(0,o.A)(),[i,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0);return l||c?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-space-dark",children:(0,r.jsxs)("div",{className:"cosmic-card p-8",children:[(0,r.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-space-cyan border-t-transparent rounded-full mx-auto"}),(0,r.jsx)("p",{className:"text-center mt-4",children:"Verifying admin access..."})]})}):i?(0,r.jsx)(r.Fragment,{children:e}):null}function i({children:e}){return(0,r.jsx)(l,{children:e})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64777:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return l}});let r=s(60687),a=s(51215),n=s(29294),o=s(19587);function l(e){let{moduleIds:t}=e,s=n.workAsyncStorage.getStore();if(void 0===s)return null;let l=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files;l.push(...t)}}return 0===l.length?null:(0,r.jsx)(r.Fragment,{children:l.map(e=>{let t=s.assetPrefix+"/_next/"+(0,o.encodeURIPath)(e);return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,a.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},64963:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let r=s(60687),a=s(43210),n=s(56780),o=s(64777);function l(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},s=(0,a.lazy)(()=>t.loader().then(l)),d=t.loading;function c(e){let l=d?(0,r.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?a.Suspense:a.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.PreloadChunks,{moduleIds:t.modules}),(0,r.jsx)(s,{...e})]}):(0,r.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(c,{...i?{fallback:l}:{},children:u})}return c.displayName="LoadableComponent",c}},73136:e=>{"use strict";e.exports=require("node:url")},73429:e=>{"use strict";e.exports=require("node:util/types")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},75919:e=>{"use strict";e.exports=require("node:worker_threads")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},77964:(e,t,s)=>{Promise.resolve().then(s.bind(s,6736))},78474:e=>{"use strict";e.exports=require("node:events")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},94750:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(60687);let a=(0,s(30036).default)(async()=>{},{loadableGenerated:{modules:["components\\HeaderWrapper.tsx -> ./Header"]},ssr:!1});function n(){return(0,r.jsx)(a,{})}},99111:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Mayank\\\\Desktop\\\\cosmicteams\\\\src\\\\app\\\\admin\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Mayank\\Desktop\\cosmicteams\\src\\app\\admin\\layout.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[158,474,691],()=>s(42394));module.exports=r})();